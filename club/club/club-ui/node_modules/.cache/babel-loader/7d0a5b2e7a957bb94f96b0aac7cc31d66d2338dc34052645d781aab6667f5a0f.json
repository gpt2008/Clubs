{"ast":null,"code":"import{notification}from\"antd\";import React from\"react\";import{withTranslation}from\"react-i18next\";import{Rest}from\"utils/utils\";import UTILS from\"../../utils/tableUtils\";import View from\"./ActsList\";import ActFormContainer from\"./ActsFormContainer\";import ActRemoveConfirmation from\"./ActsRemoveConfirmation\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";class ActsListContainer extends React.Component{constructor(){super(...arguments);this.state={};this.loadData=(offset,nameAct,codeAct)=>{if(offset)this.setState({page:offset});let limit=UTILS.calculatePageSizeForMainTableOther().limit;Rest().operation({type:\"SelectActos\",limit:limit,offset:offset?(offset-1)*limit:0,filter:nameAct,codeAct:codeAct}).then(response=>{this.setState({acts:response.data,countData:Number(response.dataCount),limit:response.limit});});};this.removeAct=()=>{Rest().operation({type:\"DeleteAct\",idAct:this.state.idActSelected}).then(()=>{this.onCloseRemoveAct(true);});};this.onClickRemoveAct=(idActSelected,nameActSelected)=>{this.setState({idActSelected:idActSelected,nameActSelected:nameActSelected,removeActVisible:true,removeActKey:new Date().getTime()});};this.onCloseRemoveAct=save=>{this.setState({idActSelected:undefined,nameActSelected:undefined,removeActVisible:false},()=>save&&this.loadData());};this.onClickEditActForm=(idActSelected,nameActSelected,codeActSelected)=>{this.setState({actFormVisible:true,actFormKey:new Date().getTime(),idActSelected:idActSelected,codeActSelected:codeActSelected,nameActSelected:nameActSelected});};this.onCloseEditActForm=save=>{this.setState({actFormVisible:false,idActSelected:undefined,codeActSelected:undefined,nameActSelected:undefined},()=>{if(save){notification[\"success\"]({message:this.props.t(\"titles:actionPerformed\")});this.loadData();}});};}componentDidMount(){this.loadData();}render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(View,{acts:this.state.acts,limit:this.state.limit?this.state.limit:1,highlightfilter:this.state.highlightfilter,countData:this.state.countData?this.state.countData:0,page:this.state.page?this.state.page:1,loadActsData:this.loadData,onClickEditActForm:this.onClickEditActForm,onClickRemoveAct:this.onClickRemoveAct}),/*#__PURE__*/_jsx(ActFormContainer,{visible:this.state.actFormVisible,idAct:this.state.idActSelected,codeAct:this.state.codeActSelected,nameAct:this.state.nameActSelected,onClose:this.onCloseEditActForm},this.state.actFormKey),/*#__PURE__*/_jsx(ActRemoveConfirmation,{nameAct:this.state.nameActSelected,visible:this.state.removeActVisible,onClose:this.onCloseRemoveAct,removeAct:this.removeAct},this.state.removeActKey)]});}}export default withTranslation(\"actsList\")(ActsListContainer);","map":{"version":3,"names":["notification","React","withTranslation","Rest","UTILS","View","ActFormContainer","ActRemoveConfirmation","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ActsListContainer","Component","constructor","arguments","state","loadData","offset","nameAct","codeAct","setState","page","limit","calculatePageSizeForMainTableOther","operation","type","filter","then","response","acts","data","countData","Number","dataCount","removeAct","idAct","idActSelected","onCloseRemoveAct","onClickRemoveAct","nameActSelected","removeActVisible","removeActKey","Date","getTime","save","undefined","onClickEditActForm","codeActSelected","actFormVisible","actFormKey","onCloseEditActForm","message","props","t","componentDidMount","render","children","highlightfilter","loadActsData","visible","onClose"],"sources":["/home/gpt2008/Desktop/Clubs/club/club/dentycard-policlinico-bo-ui/src/pages/actos/ActsListContainer.tsx"],"sourcesContent":["import { notification } from \"antd\";\nimport _ from \"lodash\";\nimport React from \"react\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport ActDetails from \"types/entities/Actos\";\nimport { Rest } from \"utils/utils\";\nimport UTILS from \"../../utils/tableUtils\"\nimport View from \"./ActsList\";\nimport ActFormContainer from \"./ActsFormContainer\";\nimport ActRemoveConfirmation from \"./ActsRemoveConfirmation\"\n\nexport interface IState {\n\tacts?: ActDetails[];\n\tloaded?: boolean;\n\tactFormVisible?: boolean;\n\tactFormKey?: number;\n\tformConfigClosingPeriodVisible?: boolean;\n\tformConfigClosingPeriodKey?: number;\n\tidActSelected?: number;\n\tcodeActSelected?: string;\n\tnameActSelected?: string;\n\tforceReloadTimestamp?: number;\n\thighlightfilter?: string;\n    countData?: number;\n\tpage?: number;\n    limit?: number;\n\tremoveActKey?: number;\n\tremoveActVisible?: boolean;\n}\n\nclass ActsListContainer extends React.Component<WithTranslation, IState> {\n    public state: IState = {};\n\n    public componentDidMount() {\n\t\tthis.loadData();\n\t}\n\n    public render() {\n        return (\n            <>\n                <View\n\t\t\t\t\tacts={this.state.acts}\n\t\t\t\t\tlimit = {this.state.limit ? this.state.limit : 1}\n\t\t\t\t\thighlightfilter={this.state.highlightfilter}\n\t\t\t\t\tcountData={this.state.countData ? this.state.countData : 0}\n\t\t\t\t\tpage={this.state.page ? this.state.page : 1}\n\t\t\t\t\tloadActsData={this.loadData}\n\t\t\t\t\tonClickEditActForm={this.onClickEditActForm}\n\t\t\t\t\tonClickRemoveAct= {this.onClickRemoveAct}\n\t\t\t\t/>\n\t\t\t\t<ActFormContainer\n\t\t\t\t\tkey={this.state.actFormKey}\n\t\t\t\t\tvisible= {this.state.actFormVisible}\n\t\t\t\t\tidAct={this.state.idActSelected}\n\t\t\t\t\tcodeAct={this.state.codeActSelected}\n\t\t\t\t\tnameAct={this.state.nameActSelected}\n\t\t\t\t\tonClose={this.onCloseEditActForm}\n\t\t\t\t/>\n\n\t\t\t\t<ActRemoveConfirmation\n\t\t\t\t\tkey={this.state.removeActKey}\n\t\t\t\t\tnameAct={this.state.nameActSelected}\n\t\t\t\t\tvisible={this.state.removeActVisible}\n\t\t\t\t\tonClose={this.onCloseRemoveAct}\n\t\t\t\t\tremoveAct={this.removeAct}\n\t\t\t\t/>\n\n            </>\n        )\n    };\n\n    private loadData = (offset?: number, nameAct?: string, codeAct?: string) => {\n\t\tif (offset) this.setState({page: offset});\n\t\tlet limit = UTILS.calculatePageSizeForMainTableOther().limit;\n\t\tRest<{ type: string, offset?:number, limit: number, filter?:string, codeAct?: string },\n         {limit:number, offset:string, dataCount:string, data: ActDetails[]}>()\n\t\t\t.operation({\n\t\t\t\ttype: \"SelectActos\",\n\t\t\t\tlimit: limit,\n\t\t\t\toffset: offset ? (offset - 1) * limit : 0,\n\t\t\t\tfilter: nameAct,\n\t\t\t\tcodeAct: codeAct\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.setState({ acts: response.data, countData: Number(response.dataCount), limit: response.limit});\n\t\t\t});\n\t};\n\n\tprivate removeAct = () => {\n\t\tRest<{ type: string; idAct: number }, any>()\n\t\t\t.operation({\n\t\t\t\ttype: \"DeleteAct\",\n\t\t\t\tidAct: this.state.idActSelected!,\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.onCloseRemoveAct(true);\n\t\t\t});\n\t};\n\n\tprivate onClickRemoveAct = (idActSelected: number, nameActSelected: string) => {\n\t\tthis.setState({\n\t\t\tidActSelected: idActSelected,\n\t\t\tnameActSelected: nameActSelected,\n\t\t\tremoveActVisible: true,\n\t\t\tremoveActKey: new Date().getTime(),\n\t\t});\n\t};\n\n\tprivate onCloseRemoveAct = (save: boolean) => {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tidActSelected: undefined,\n\t\t\t\tnameActSelected: undefined,\n\t\t\t\tremoveActVisible: false,\n\t\t\t},\n\t\t\t() => save && this.loadData()\n\t\t);\n\t};\n\n    private onClickEditActForm = (idActSelected?: number, nameActSelected?: string, codeActSelected?: string) => {\n\t\tthis.setState({\n\t\t\tactFormVisible: true,\n\t\t\tactFormKey: new Date().getTime(),\n\t\t\tidActSelected: idActSelected,\n\t\t\tcodeActSelected: codeActSelected,\n\t\t\tnameActSelected: nameActSelected,\n\t\t});\n\t};\n\n    private onCloseEditActForm = (save: boolean) => {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tactFormVisible: false,\n\t\t\t\tidActSelected: undefined,\n\t\t\t\tcodeActSelected: undefined,\n\t\t\t\tnameActSelected: undefined,\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif (save) {\n\t\t\t\t\tnotification[\"success\"]({\n\t\t\t\t\t\tmessage: this.props.t(\"titles:actionPerformed\"),\n\t\t\t\t\t});\n\t\t\t\t\tthis.loadData();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n}\n\nexport default withTranslation(\"actsList\")(ActsListContainer);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}