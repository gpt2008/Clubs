{"ast":null,"code":"import React from\"react\";import{notification}from\"antd\";import _ from\"lodash\";import{withTranslation}from\"react-i18next\";import enumPrestadorScheduleSlotConfigurationType from\"types/enums/EnumPrestadorScheduleSlotConfigurationType\";import{Rest}from\"utils/utils\";import View from\"./ScheduleForm\";import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";class ScheduleFormContainer extends React.Component{constructor(){super(...arguments);this.state={slotsDays:[],errors:[],step:0,subStep:0,nameScheduleError:false,dateFromError:false,dateAlreadyUsedError:false,daySelectionError:false};this.loadData=()=>{Rest().operation({type:\"GetScheduleSlotsData\",idSchedule:this.props.idSchedule}).then(response=>{if(response.slotsDays){let slotsDays=response.slotsDays.map((sd,i)=>{var _sd$slots;if(((_sd$slots=sd.slots)===null||_sd$slots===void 0?void 0:_sd$slots.length)===0){sd.configurationType=enumPrestadorScheduleSlotConfigurationType.COPY;sd.slots=undefined;}else{var _sd$slots2;sd.configurationType=enumPrestadorScheduleSlotConfigurationType.CUSTOM;(_sd$slots2=sd.slots)===null||_sd$slots2===void 0?void 0:_sd$slots2.map(sl=>{if(sl.idLocation){const loc=response.locations.find(l=>l.idLocation===sl.idLocation);sl.location={key:loc.idLocation,label:loc.nameLocation,value:loc.idLocation};}if(sl.idPortfolio){const port=response.portfolios.find(p=>p.idPortfolio===sl.idPortfolio);sl.portfolio={key:port.idPortfolio,label:port.namePortfolio,value:port.idPortfolio};}sl.timeFrom=this.getTime(sl.valueTimeFrom);sl.timeTo=this.getTime(sl.valueTimeTo);return sl;});}if(this.props.cloneSchedule){sd.idScheduleDay=undefined;}return sd;});slotsDays=_(slotsDays).orderBy(\"day\").value();this.setState({locations:response.locations,portfolios:response.portfolios,slotsDays,loaded:true,nameSchedule:response.nameSchedule,dateFrom:response.dateFrom,idSchedule:this.props.idSchedule});}else{this.setState({locations:response.locations,portfolios:response.portfolios,loaded:true});}});};this.onChangeNameSchedule=name=>{let errors=[...this.state.errors];this.setState({nameSchedule:name,errors,nameScheduleError:false});};this.onChangeDateFrom=(date,dateString)=>{let errors=[...this.state.errors];this.setState({dateFrom:date,errors,dateFromError:false,dateAlreadyUsedError:false});};this.onChangeCheckbox=(value,checked)=>{let slotsDays=[...this.state.slotsDays];let errors=[...this.state.errors];if(checked){slotsDays.push({day:value});}else{slotsDays=slotsDays.filter(sd=>sd.day!==value);}slotsDays=_(slotsDays).orderBy(\"day\").value();this.setState({slotsDays,errors,daySelectionError:false});};this.onChangeConfiguration=value=>{const slotsDays=[...this.state.slotsDays];slotsDays[this.state.subStep-1].configurationType=value;if(value===enumPrestadorScheduleSlotConfigurationType.CUSTOM){slotsDays[this.state.subStep-1].slots=[{flagAllowGroupSession:false,flagAllowOnlineCon:false,flagAllowPriorPayment:false}];slotsDays[this.state.subStep-1].copyConfigurationDay=undefined;}else{slotsDays[this.state.subStep-1].slots=undefined;}this.setState({slotsDays,errors:[]});};this.selectCopyConfiguration=value=>{const slotsDays=[...this.state.slotsDays];let errors=[...this.state.errors];slotsDays[this.state.subStep-1].copyConfigurationDay=value;errors=errors.filter(e=>e!==\"copyConfigurationDay\");this.setState({slotsDays,errors});};this.addSlot=()=>{var _slotsDays$slots;const slotsDays=[...this.state.slotsDays];(_slotsDays$slots=slotsDays[this.state.subStep-1].slots)===null||_slotsDays$slots===void 0?void 0:_slotsDays$slots.push({flagAllowGroupSession:false,flagAllowOnlineCon:false,flagAllowPriorPayment:false});this.setState({slotsDays});};this.deleteSlot=index=>{var _slotsDays$slots2;const slotsDays=[...this.state.slotsDays];(_slotsDays$slots2=slotsDays[this.state.subStep-1].slots)===null||_slotsDays$slots2===void 0?void 0:_slotsDays$slots2.splice(index-1,1);this.setState({slotsDays,errors:[]});};this.onChangeSelects=(index,location,portfolio)=>{var _slotsDays$slots3;const slotsDays=[...this.state.slotsDays];let errors=[...this.state.errors];(_slotsDays$slots3=slotsDays[this.state.subStep-1].slots)===null||_slotsDays$slots3===void 0?void 0:_slotsDays$slots3.forEach((sl,i)=>{if(i===index-1){if(location!==undefined){sl.idLocation=location.value;sl.location=location;}if(portfolio!==undefined){sl.idPortfolio=portfolio.value;sl.portfolio=portfolio;}}});if(location!==undefined)errors=errors.filter(e=>e!==\"location\"+index);if(portfolio!==undefined)errors=errors.filter(e=>e!==\"portfolio\"+index);this.setState({slotsDays,errors});};this.onChangeTimes=(index,date,timeFrom)=>{var _slotsDays$slots4;const slotsDays=[...this.state.slotsDays];let errors=[...this.state.errors];(_slotsDays$slots4=slotsDays[this.state.subStep-1].slots)===null||_slotsDays$slots4===void 0?void 0:_slotsDays$slots4.forEach((sl,i)=>{if(i===index-1){const minDate=this.getMinutes(date);if(timeFrom){sl.timeFrom=date;sl.valueTimeFrom=Number(minDate);}else{sl.timeTo=date;sl.valueTimeTo=Number(minDate);}}});errors=errors.filter(e=>e!==(timeFrom?\"timeFrom\":\"timeTo\")+index);errors=errors.filter(e=>e!==\"valTimeFrom\"+index&&e!==\"valTimeTo\"+index);this.setState({slotsDays});};this.onChangeInterval=(index,value)=>{var _slotsDays$slots5;const slotsDays=[...this.state.slotsDays];let errors=[...this.state.errors];(_slotsDays$slots5=slotsDays[this.state.subStep-1].slots)===null||_slotsDays$slots5===void 0?void 0:_slotsDays$slots5.forEach((sl,i)=>{if(i===index-1){sl.interval=value;}});errors=errors.filter(e=>e!==\"interval\"+index);this.setState({slotsDays});};this.onChangeParticipants=(index,value)=>{var _slotsDays$slots6;const slotsDays=[...this.state.slotsDays];let errors=[...this.state.errors];(_slotsDays$slots6=slotsDays[this.state.subStep-1].slots)===null||_slotsDays$slots6===void 0?void 0:_slotsDays$slots6.forEach((sl,i)=>{if(i===index-1){sl.nbrParticipants=value;}});errors=errors.filter(e=>e!==\"participants\"+index);this.setState({slotsDays});};this.onChangeFlags=(index,flagGroup,flagCon,flagPay)=>{var _slotsDays$slots7;const slotsDays=[...this.state.slotsDays];(_slotsDays$slots7=slotsDays[this.state.subStep-1].slots)===null||_slotsDays$slots7===void 0?void 0:_slotsDays$slots7.forEach((sl,i)=>{if(i===index-1){if(flagGroup!==undefined){sl.flagAllowGroupSession=flagGroup;if(!flagGroup){sl.nbrParticipants=1;}else{sl.nbrParticipants=undefined;}}if(flagCon!==undefined)sl.flagAllowOnlineCon=flagCon;if(flagPay!==undefined)sl.flagAllowPriorPayment=flagPay;}});this.setState({slotsDays});};this.goBack=()=>{if(this.state.subStep>1){this.setState({subStep:this.state.subStep-1});return;}this.setState({step:this.state.step-1});};this.goNext=async()=>{if(this.state.step===1){this.validateSlotConfiguration();return;}this.validateDaySelection();};this.validateDaySelection=()=>{if(this.state.nameSchedule===undefined){this.setState({nameScheduleError:true});}else if(this.state.dateFrom===undefined){this.setState({dateFromError:true});}else if(this.state.slotsDays.length===0){this.setState({daySelectionError:true});}else{this.setState({step:this.state.step+1,subStep:1},()=>{if(!this.state.slotsDays[this.state.subStep-1].slots){const slotsDays=[...this.state.slotsDays];slotsDays[this.state.subStep-1].configurationType=enumPrestadorScheduleSlotConfigurationType.CUSTOM;slotsDays[this.state.subStep-1].slots=[{flagAllowGroupSession:false,flagAllowOnlineCon:false,flagAllowPriorPayment:false}];this.setState({slotsDays});}});}};this.validateSlotConfiguration=()=>{const slotDay=this.state.slotsDays[this.state.subStep-1];const errors=[];if(!slotDay.configurationType){errors.push(\"configurationType\");}else{slotDay.configurationType===enumPrestadorScheduleSlotConfigurationType.COPY&&!slotDay.copyConfigurationDay&&errors.push(\"copyConfigurationDay\");if(slotDay.configurationType===enumPrestadorScheduleSlotConfigurationType.CUSTOM){var _slotDay$slots;(_slotDay$slots=slotDay.slots)===null||_slotDay$slots===void 0?void 0:_slotDay$slots.forEach((sl,i)=>{!sl.timeFrom&&errors.push(\"timeFrom\"+(i+1));!sl.timeTo&&errors.push(\"timeTo\"+(i+1));!sl.interval&&errors.push(\"interval\"+(i+1));sl.flagAllowGroupSession&&(typeof sl.nbrParticipants===\"undefined\"||sl.nbrParticipants.toString().trim()===\"\"||sl.nbrParticipants<2)&&errors.push(\"participants\"+(i+1));});}}if(errors.length===0){var _slotDay$slots2;(_slotDay$slots2=slotDay.slots)===null||_slotDay$slots2===void 0?void 0:_slotDay$slots2.forEach((sl,i)=>{if(sl.valueTimeFrom!==undefined&&sl.valueTimeTo!==undefined){if(sl.valueTimeFrom>=sl.valueTimeTo){errors.push(\"valTimeFrom\"+(i+1));errors.push(\"valTimeTo\"+(i+1));}}});if(errors.length>0){notification[\"error\"]({message:this.props.t(\"timeFieldsErrors\")});}}this.setState({errors},()=>{if(errors.length===0){if(this.state.subStep===this.state.slotsDays.length){this.save();return;}this.setState({subStep:this.state.subStep+1});}});};this.getMinutes=time=>{if(time!==undefined){// Dividir en partes\nconst parts=time.split(\":\");// Calcular minutos (horas * 60 + minutos)\nreturn parseInt(parts[0])*60+parseInt(parts[1])+\"\";}return\"\";};this.getTime=mins=>{const hours=Math.floor(mins/60);const minutes=mins%60;return(hours<10?\"0\":\"\")+hours+\":\"+(minutes<10?\"0\":\"\")+minutes;};this.save=()=>{Rest().operation({type:\"SaveSchedule\",idProvider:this.props.idProvider,idSchedule:this.props.cloneSchedule?undefined:this.state.idSchedule,name:this.state.nameSchedule,dateFrom:this.state.dateFrom,days:this.state.slotsDays}).then(response=>{if(response){const days=response.map(d=>this.props.t(\"weekDays:\"+d));notification[\"error\"]({message:this.props.t(\"slotsOverlapError\")+days.join(\", \")});}else{this.props.onClose(true);}});};}componentDidMount(){if(this.props.visible){this.loadData();}}render(){return this.state.loaded?/*#__PURE__*/_jsx(View,{...this.state,visible:this.props.visible,nameProvider:this.props.nameProvider,nameSchedule:this.state.nameSchedule,dateFrom:this.state.dateFrom,goBack:this.goBack,goNext:this.goNext,onChangeNameSchedule:this.onChangeNameSchedule,onChangeDateFrom:this.onChangeDateFrom,onChangeCheckbox:this.onChangeCheckbox,onChangeConfiguration:this.onChangeConfiguration,selectCopyConfiguration:this.selectCopyConfiguration,addSlot:this.addSlot,deleteSlot:this.deleteSlot,onChangeSelects:this.onChangeSelects,onChangeTimes:this.onChangeTimes,onChangeInterval:this.onChangeInterval,onChangeFlags:this.onChangeFlags,onChangeParticipants:this.onChangeParticipants,onCancel:()=>this.props.onClose(false)}):/*#__PURE__*/_jsx(_Fragment,{});}}export default withTranslation(\"scheduleForm\")(ScheduleFormContainer);","map":{"version":3,"names":["React","notification","_","withTranslation","enumPrestadorScheduleSlotConfigurationType","Rest","View","jsx","_jsx","Fragment","_Fragment","ScheduleFormContainer","Component","constructor","arguments","state","slotsDays","errors","step","subStep","nameScheduleError","dateFromError","dateAlreadyUsedError","daySelectionError","loadData","operation","type","idSchedule","props","then","response","map","sd","i","_sd$slots","slots","length","configurationType","COPY","undefined","_sd$slots2","CUSTOM","sl","idLocation","loc","locations","find","l","location","key","label","nameLocation","value","idPortfolio","port","portfolios","p","portfolio","namePortfolio","timeFrom","getTime","valueTimeFrom","timeTo","valueTimeTo","cloneSchedule","idScheduleDay","orderBy","setState","loaded","nameSchedule","dateFrom","onChangeNameSchedule","name","onChangeDateFrom","date","dateString","onChangeCheckbox","checked","push","day","filter","onChangeConfiguration","flagAllowGroupSession","flagAllowOnlineCon","flagAllowPriorPayment","copyConfigurationDay","selectCopyConfiguration","e","addSlot","_slotsDays$slots","deleteSlot","index","_slotsDays$slots2","splice","onChangeSelects","_slotsDays$slots3","forEach","onChangeTimes","_slotsDays$slots4","minDate","getMinutes","Number","onChangeInterval","_slotsDays$slots5","interval","onChangeParticipants","_slotsDays$slots6","nbrParticipants","onChangeFlags","flagGroup","flagCon","flagPay","_slotsDays$slots7","goBack","goNext","validateSlotConfiguration","validateDaySelection","slotDay","_slotDay$slots","toString","trim","_slotDay$slots2","message","t","save","time","parts","split","parseInt","mins","hours","Math","floor","minutes","idProvider","days","d","join","onClose","componentDidMount","visible","render","nameProvider","onCancel"],"sources":["/home/gpt2008/Desktop/Clubs/club/club/club-ui/src/components/providerSchedules/ScheduleFormContainer.tsx"],"sourcesContent":["import React from \"react\";\n\nimport { notification } from \"antd\";\nimport _ from \"lodash\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport Schedule from \"types/entities/Schedule\";\nimport ScheduleDaySlots from \"types/entities/ScheduleDaySlots\";\nimport enumPrestadorScheduleSlotConfigurationType from \"types/enums/EnumPrestadorScheduleSlotConfigurationType\";\nimport { Rest } from \"utils/utils\";\nimport View from \"./ScheduleForm\";\n\ninterface IProps {\n\tvisible?: boolean;\n\tidProvider: number;\n\tnameProvider: string;\n\tidSchedule?: number;\n\tnameSchedule?: string;\n\tcloneSchedule?: boolean;\n\tonClose: (save: boolean) => void;\n}\n\nexport interface IState {\n\tidSchedule?: number;\n\tloaded?: boolean;\n\tnameSchedule?: string;\n\tdateFrom?: Date;\n\tschedule?: Schedule;\n\tslotsDays: ScheduleDaySlots[];\n\tlocations?: { idLocation: number; nameLocation: string }[];\n\tportfolios?: { idPortfolio: number; namePortfolio: string }[];\n\tstep: number;\n\tsubStep: number;\n\terrors: string[];\n\tnameScheduleError: boolean;\n\tdateFromError: boolean;\n\tdateAlreadyUsedError: boolean;\n\tdaySelectionError: boolean;\n}\n\nclass ScheduleFormContainer extends React.Component<WithTranslation & IProps, IState> {\n\tpublic state: IState = {\n\t\tslotsDays: [],\n\t\terrors: [],\n\t\tstep: 0,\n\t\tsubStep: 0,\n\t\tnameScheduleError: false,\n\t\tdateFromError: false,\n\t\tdateAlreadyUsedError: false,\n\t\tdaySelectionError: false,\n\t};\n\n\tpublic componentDidMount() {\n\t\tif (this.props.visible) {\n\t\t\tthis.loadData();\n\t\t}\n\t}\n\n\tpublic render() {\n\t\treturn this.state.loaded ? (\n\t\t\t<View\n\t\t\t\t{...this.state}\n\t\t\t\tvisible={this.props.visible}\n\t\t\t\tnameProvider={this.props.nameProvider}\n\t\t\t\tnameSchedule={this.state.nameSchedule}\n\t\t\t\tdateFrom={this.state.dateFrom}\n\t\t\t\tgoBack={this.goBack}\n\t\t\t\tgoNext={this.goNext}\n\t\t\t\tonChangeNameSchedule={this.onChangeNameSchedule}\n\t\t\t\tonChangeDateFrom={this.onChangeDateFrom}\n\t\t\t\tonChangeCheckbox={this.onChangeCheckbox}\n\t\t\t\tonChangeConfiguration={this.onChangeConfiguration}\n\t\t\t\tselectCopyConfiguration={this.selectCopyConfiguration}\n\t\t\t\taddSlot={this.addSlot}\n\t\t\t\tdeleteSlot={this.deleteSlot}\n\t\t\t\tonChangeSelects={this.onChangeSelects}\n\t\t\t\tonChangeTimes={this.onChangeTimes}\n\t\t\t\tonChangeInterval={this.onChangeInterval}\n\t\t\t\tonChangeFlags={this.onChangeFlags}\n\t\t\t\tonChangeParticipants={this.onChangeParticipants}\n\t\t\t\tonCancel={() => this.props.onClose(false)}\n\t\t\t/>\n\t\t) : (\n\t\t\t<></>\n\t\t);\n\t}\n\n\tprivate loadData = () => {\n\t\tRest<{ type: string; idSchedule?: number }, any>()\n\t\t\t.operation({\n\t\t\t\ttype: \"GetScheduleSlotsData\",\n\t\t\t\tidSchedule: this.props.idSchedule,\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (response.slotsDays) {\n\t\t\t\t\tlet slotsDays = response.slotsDays.map((sd: ScheduleDaySlots, i: number) => {\n\t\t\t\t\t\tif (sd.slots?.length === 0) {\n\t\t\t\t\t\t\tsd.configurationType = enumPrestadorScheduleSlotConfigurationType.COPY;\n\t\t\t\t\t\t\tsd.slots = undefined;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsd.configurationType = enumPrestadorScheduleSlotConfigurationType.CUSTOM;\n\n\t\t\t\t\t\t\tsd.slots?.map((sl) => {\n\t\t\t\t\t\t\t\tif (sl.idLocation) {\n\t\t\t\t\t\t\t\t\tconst loc = response.locations.find((l: any) => l.idLocation === sl.idLocation);\n\t\t\t\t\t\t\t\t\tsl.location = {\n\t\t\t\t\t\t\t\t\t\tkey: loc.idLocation,\n\t\t\t\t\t\t\t\t\t\tlabel: loc.nameLocation,\n\t\t\t\t\t\t\t\t\t\tvalue: loc.idLocation,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (sl.idPortfolio) {\n\t\t\t\t\t\t\t\t\tconst port = response.portfolios.find(\n\t\t\t\t\t\t\t\t\t\t(p: any) => p.idPortfolio === sl.idPortfolio\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsl.portfolio = {\n\t\t\t\t\t\t\t\t\t\tkey: port.idPortfolio,\n\t\t\t\t\t\t\t\t\t\tlabel: port.namePortfolio,\n\t\t\t\t\t\t\t\t\t\tvalue: port.idPortfolio,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tsl.timeFrom = this.getTime(sl.valueTimeFrom!);\n\t\t\t\t\t\t\t\tsl.timeTo = this.getTime(sl.valueTimeTo!);\n\t\t\t\t\t\t\t\treturn sl;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.props.cloneSchedule) {\n\t\t\t\t\t\t\tsd.idScheduleDay = undefined;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn sd;\n\t\t\t\t\t});\n\t\t\t\t\tslotsDays = _(slotsDays).orderBy(\"day\").value() as ScheduleDaySlots[];\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tlocations: response.locations,\n\t\t\t\t\t\tportfolios: response.portfolios,\n\t\t\t\t\t\tslotsDays,\n\t\t\t\t\t\tloaded: true,\n\t\t\t\t\t\tnameSchedule: response.nameSchedule,\n\t\t\t\t\t\tdateFrom: response.dateFrom,\n\t\t\t\t\t\tidSchedule: this.props.idSchedule,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tlocations: response.locations,\n\t\t\t\t\t\tportfolios: response.portfolios,\n\t\t\t\t\t\tloaded: true,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tprivate onChangeNameSchedule = (name?: string) => {\n\t\tlet errors = [...this.state.errors];\n\n\t\tthis.setState({ nameSchedule: name, errors, nameScheduleError: false });\n\t};\n\n\tprivate onChangeDateFrom = (date?: Date | undefined, dateString?: string) => {\n\t\tlet errors = [...this.state.errors];\n\n\t\tthis.setState({\n\t\t\tdateFrom: date,\n\t\t\terrors,\n\t\t\tdateFromError: false,\n\t\t\tdateAlreadyUsedError: false,\n\t\t});\n\t};\n\n\tprivate onChangeCheckbox = (value: number, checked: boolean) => {\n\t\tlet slotsDays = [...this.state.slotsDays];\n\t\tlet errors = [...this.state.errors];\n\n\t\tif (checked) {\n\t\t\tslotsDays.push({ day: value });\n\t\t} else {\n\t\t\tslotsDays = slotsDays.filter((sd) => sd.day !== value);\n\t\t}\n\n\t\tslotsDays = _(slotsDays).orderBy(\"day\").value() as ScheduleDaySlots[];\n\t\tthis.setState({ slotsDays, errors, daySelectionError: false });\n\t};\n\n\tprivate onChangeConfiguration = (value: number) => {\n\t\tconst slotsDays = [...this.state.slotsDays];\n\n\t\tslotsDays[this.state.subStep - 1].configurationType = value;\n\t\tif (value === enumPrestadorScheduleSlotConfigurationType.CUSTOM) {\n\t\t\tslotsDays[this.state.subStep - 1].slots = [\n\t\t\t\t{\n\t\t\t\t\tflagAllowGroupSession: false,\n\t\t\t\t\tflagAllowOnlineCon: false,\n\t\t\t\t\tflagAllowPriorPayment: false,\n\t\t\t\t},\n\t\t\t];\n\t\t\tslotsDays[this.state.subStep - 1].copyConfigurationDay = undefined;\n\t\t} else {\n\t\t\tslotsDays[this.state.subStep - 1].slots = undefined;\n\t\t}\n\n\t\tthis.setState({ slotsDays, errors: [] });\n\t};\n\n\tprivate selectCopyConfiguration = (value: number) => {\n\t\tconst slotsDays = [...this.state.slotsDays];\n\t\tlet errors = [...this.state.errors];\n\n\t\tslotsDays[this.state.subStep - 1].copyConfigurationDay = value;\n\t\terrors = errors.filter((e) => e !== \"copyConfigurationDay\");\n\n\t\tthis.setState({ slotsDays, errors });\n\t};\n\n\tprivate addSlot = () => {\n\t\tconst slotsDays = [...this.state.slotsDays];\n\t\tslotsDays[this.state.subStep - 1].slots?.push({\n\t\t\tflagAllowGroupSession: false,\n\t\t\tflagAllowOnlineCon: false,\n\t\t\tflagAllowPriorPayment: false,\n\t\t});\n\t\tthis.setState({ slotsDays });\n\t};\n\n\tprivate deleteSlot = (index: number) => {\n\t\tconst slotsDays = [...this.state.slotsDays];\n\n\t\tslotsDays[this.state.subStep - 1].slots?.splice(index - 1, 1);\n\t\tthis.setState({ slotsDays, errors: [] });\n\t};\n\n\tprivate onChangeSelects = (index: number, location?: any, portfolio?: any) => {\n\t\tconst slotsDays = [...this.state.slotsDays];\n\t\tlet errors = [...this.state.errors];\n\n\t\tslotsDays[this.state.subStep - 1].slots?.forEach((sl, i) => {\n\t\t\tif (i === index - 1) {\n\t\t\t\tif (location !== undefined) {\n\t\t\t\t\tsl.idLocation = location.value;\n\t\t\t\t\tsl.location = location;\n\t\t\t\t}\n\t\t\t\tif (portfolio !== undefined) {\n\t\t\t\t\tsl.idPortfolio = portfolio.value;\n\t\t\t\t\tsl.portfolio = portfolio;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (location !== undefined) errors = errors.filter((e) => e !== \"location\" + index);\n\t\tif (portfolio !== undefined) errors = errors.filter((e) => e !== \"portfolio\" + index);\n\n\t\tthis.setState({ slotsDays, errors });\n\t};\n\n\tprivate onChangeTimes = (index: number, date: string, timeFrom: boolean) => {\n\t\tconst slotsDays = [...this.state.slotsDays];\n\t\tlet errors = [...this.state.errors];\n\n\t\tslotsDays[this.state.subStep - 1].slots?.forEach((sl, i) => {\n\t\t\tif (i === index - 1) {\n\t\t\t\tconst minDate = this.getMinutes(date);\n\t\t\t\tif (timeFrom) {\n\t\t\t\t\tsl.timeFrom = date;\n\t\t\t\t\tsl.valueTimeFrom = Number(minDate);\n\t\t\t\t} else {\n\t\t\t\t\tsl.timeTo = date;\n\t\t\t\t\tsl.valueTimeTo = Number(minDate);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\terrors = errors.filter((e) => e !== (timeFrom ? \"timeFrom\" : \"timeTo\") + index);\n\t\terrors = errors.filter((e) => e !== \"valTimeFrom\" + index && e !== \"valTimeTo\" + index);\n\n\t\tthis.setState({ slotsDays });\n\t};\n\n\tprivate onChangeInterval = (index: number, value: number) => {\n\t\tconst slotsDays = [...this.state.slotsDays];\n\t\tlet errors = [...this.state.errors];\n\n\t\tslotsDays[this.state.subStep - 1].slots?.forEach((sl, i) => {\n\t\t\tif (i === index - 1) {\n\t\t\t\tsl.interval = value;\n\t\t\t}\n\t\t});\n\n\t\terrors = errors.filter((e) => e !== \"interval\" + index);\n\n\t\tthis.setState({ slotsDays });\n\t};\n\n\tprivate onChangeParticipants = (index: number, value: number) => {\n\t\tconst slotsDays = [...this.state.slotsDays];\n\t\tlet errors = [...this.state.errors];\n\n\t\tslotsDays[this.state.subStep - 1].slots?.forEach((sl, i) => {\n\t\t\tif (i === index - 1) {\n\t\t\t\tsl.nbrParticipants = value;\n\t\t\t}\n\t\t});\n\n\t\terrors = errors.filter((e) => e !== \"participants\" + index);\n\n\t\tthis.setState({ slotsDays });\n\t};\n\n\tprivate onChangeFlags = (\n\t\tindex: number,\n\t\tflagGroup?: boolean,\n\t\tflagCon?: boolean,\n\t\tflagPay?: boolean\n\t) => {\n\t\tconst slotsDays = [...this.state.slotsDays];\n\n\t\tslotsDays[this.state.subStep - 1].slots?.forEach((sl, i) => {\n\t\t\tif (i === index - 1) {\n\t\t\t\tif (flagGroup !== undefined) {\n\t\t\t\t\tsl.flagAllowGroupSession = flagGroup;\n\t\t\t\t\tif (!flagGroup) {\n\t\t\t\t\t\tsl.nbrParticipants = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsl.nbrParticipants = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (flagCon !== undefined) sl.flagAllowOnlineCon = flagCon;\n\t\t\t\tif (flagPay !== undefined) sl.flagAllowPriorPayment = flagPay;\n\t\t\t}\n\t\t});\n\t\tthis.setState({ slotsDays });\n\t};\n\n\tprivate goBack = () => {\n\t\tif (this.state.subStep > 1) {\n\t\t\tthis.setState({ subStep: this.state.subStep - 1 });\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState({ step: this.state.step - 1 });\n\t};\n\n\tprivate goNext = async () => {\n\t\tif (this.state.step === 1) {\n\t\t\tthis.validateSlotConfiguration();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.validateDaySelection();\n\t};\n\n\tprivate validateDaySelection = () => {\n\t\tif (this.state.nameSchedule === undefined) {\n\t\t\tthis.setState({ nameScheduleError: true });\n\t\t} else if (this.state.dateFrom === undefined) {\n\t\t\tthis.setState({ dateFromError: true });\n\t\t} else if (this.state.slotsDays.length === 0) {\n\t\t\tthis.setState({ daySelectionError: true });\n\t\t} else {\n\t\t\tthis.setState({ step: this.state.step + 1, subStep: 1 }, () => {\n\t\t\t\tif (!this.state.slotsDays[this.state.subStep - 1].slots) {\n\t\t\t\t\tconst slotsDays = [...this.state.slotsDays];\n\t\t\t\t\tslotsDays[this.state.subStep - 1].configurationType =\n\t\t\t\t\t\tenumPrestadorScheduleSlotConfigurationType.CUSTOM;\n\t\t\t\t\tslotsDays[this.state.subStep - 1].slots = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tflagAllowGroupSession: false,\n\t\t\t\t\t\t\tflagAllowOnlineCon: false,\n\t\t\t\t\t\t\tflagAllowPriorPayment: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t];\n\t\t\t\t\tthis.setState({ slotsDays });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tprivate validateSlotConfiguration = () => {\n\t\tconst slotDay = this.state.slotsDays[this.state.subStep - 1];\n\t\tconst errors = [];\n\n\t\tif (!slotDay.configurationType) {\n\t\t\terrors.push(\"configurationType\");\n\t\t} else {\n\t\t\tslotDay.configurationType === enumPrestadorScheduleSlotConfigurationType.COPY &&\n\t\t\t\t!slotDay.copyConfigurationDay &&\n\t\t\t\terrors.push(\"copyConfigurationDay\");\n\n\t\t\tif (slotDay.configurationType === enumPrestadorScheduleSlotConfigurationType.CUSTOM) {\n\t\t\t\tslotDay.slots?.forEach((sl, i) => {\n\t\t\t\t\t!sl.timeFrom && errors.push(\"timeFrom\" + (i + 1));\n\t\t\t\t\t!sl.timeTo && errors.push(\"timeTo\" + (i + 1));\n\t\t\t\t\t!sl.interval && errors.push(\"interval\" + (i + 1));\n\t\t\t\t\tsl.flagAllowGroupSession &&\n\t\t\t\t\t\t(typeof sl.nbrParticipants === \"undefined\" ||\n\t\t\t\t\t\t\tsl.nbrParticipants.toString().trim() === \"\" ||\n\t\t\t\t\t\t\tsl.nbrParticipants < 2) &&\n\t\t\t\t\t\terrors.push(\"participants\" + (i + 1));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (errors.length === 0) {\n\t\t\tslotDay.slots?.forEach((sl, i) => {\n\t\t\t\tif (sl.valueTimeFrom !== undefined && sl.valueTimeTo !== undefined) {\n\t\t\t\t\tif (sl.valueTimeFrom >= sl.valueTimeTo) {\n\t\t\t\t\t\terrors.push(\"valTimeFrom\" + (i + 1));\n\t\t\t\t\t\terrors.push(\"valTimeTo\" + (i + 1));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (errors.length > 0) {\n\t\t\t\tnotification[\"error\"]({\n\t\t\t\t\tmessage: this.props.t(\"timeFieldsErrors\"),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.setState({ errors }, () => {\n\t\t\tif (errors.length === 0) {\n\t\t\t\tif (this.state.subStep === this.state.slotsDays.length) {\n\t\t\t\t\tthis.save();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.setState({ subStep: this.state.subStep + 1 });\n\t\t\t}\n\t\t});\n\t};\n\n\tprivate getMinutes = (time: string) => {\n\t\tif (time !== undefined) {\n\t\t\t// Dividir en partes\n\t\t\tconst parts = time.split(\":\");\n\n\t\t\t// Calcular minutos (horas * 60 + minutos)\n\t\t\treturn parseInt(parts[0]) * 60 + parseInt(parts[1]) + \"\";\n\t\t}\n\n\t\treturn \"\";\n\t};\n\n\tprivate getTime = (mins: number) => {\n\t\tconst hours = Math.floor(mins / 60);\n\t\tconst minutes = mins % 60;\n\n\t\treturn (hours < 10 ? \"0\" : \"\") + hours + \":\" + (minutes < 10 ? \"0\" : \"\") + minutes;\n\t};\n\n\tprivate save = () => {\n\t\tRest<\n\t\t\t{\n\t\t\t\ttype: string;\n\t\t\t\tidProvider: number;\n\t\t\t\tidSchedule?: number;\n\t\t\t\tname: string;\n\t\t\t\tdateFrom: Date;\n\t\t\t\tdays: ScheduleDaySlots[];\n\t\t\t},\n\t\t\tany\n\t\t>()\n\t\t\t.operation({\n\t\t\t\ttype: \"SaveSchedule\",\n\t\t\t\tidProvider: this.props.idProvider,\n\t\t\t\tidSchedule: this.props.cloneSchedule ? undefined : this.state.idSchedule,\n\t\t\t\tname: this.state.nameSchedule!,\n\t\t\t\tdateFrom: this.state.dateFrom!,\n\t\t\t\tdays: this.state.slotsDays,\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (response) {\n\t\t\t\t\tconst days = response.map((d: any) => this.props.t(\"weekDays:\" + d));\n\t\t\t\t\tnotification[\"error\"]({\n\t\t\t\t\t\tmessage: this.props.t(\"slotsOverlapError\") + days.join(\", \"),\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.onClose(true);\n\t\t\t\t}\n\t\t\t});\n\t};\n}\n\nexport default withTranslation(\"scheduleForm\")(ScheduleFormContainer);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}