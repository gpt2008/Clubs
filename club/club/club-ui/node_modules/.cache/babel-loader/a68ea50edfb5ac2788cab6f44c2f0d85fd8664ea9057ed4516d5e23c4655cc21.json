{"ast":null,"code":"import{faInfo}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{message}from\"antd\";import LoginForm from\"components/loginForm/LoginForm\";import{useState}from\"react\";import{useTranslation}from\"react-i18next\";import router from\"router\";import{agendas}from\"utils/router-utils\";import{Rest}from\"utils/utils\";import\"./login.scss\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){const{t}=useTranslation([\"login\"]);const[loading,setLoading]=useState(false);const[messageApi,contextHolder]=message.useMessage();const validationFailed=()=>{setLoading(false);messageApi.warning(t(\"emptyFieldsWarning\"));};const handleForgetPassword=async values=>{var emailAdmin=\"\";var responseSelectEmail=null;var cleanUsername=values.username.trim();responseSelectEmail=await Rest().operation({type:\"SelectEmailAdminByCode\",codeUser:cleanUsername});if(responseSelectEmail!=null){emailAdmin=responseSelectEmail[\"valueEmail\"];}Rest().operation({type:\"RegeneratePassword\",username:cleanUsername,email:emailAdmin}).then(response=>{if(response===0){messageApi.success(\"Correo de recuperacion de contraseña solicitado con exito\");}if(response===1){messageApi.error(\"Se ha producido un error al introducir el usuario\");}});};const login=values=>{var cleanUsername=values.username.trim();setLoading(true);Rest().operation({type:\"Login\",login:cleanUsername,password:values.password}).then(response=>{setLoading(false);if(response.valid){router.navigate(agendas);}else{messageApi.error(t(\"invalidCredentials\"));}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[contextHolder,/*#__PURE__*/_jsxs(\"div\",{className:\"login__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login__container__left\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"primary\",children:/*#__PURE__*/_jsx(\"strong\",{children:t(\"accessArea\")})}),/*#__PURE__*/_jsx(\"p\",{children:t(\"accessAreaWelcome\")}),/*#__PURE__*/_jsx(\"div\",{className:\"login__container__left__forms\",children:/*#__PURE__*/_jsx(LoginForm,{onFailedForm:validationFailed,onSuccess:login,loading:loading,onForgotPassword:handleForgetPassword})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login__info\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faInfo}),/*#__PURE__*/_jsx(\"p\",{children:t(\"information\")})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login__container__right\"})]})]});}export default Login;","map":{"version":3,"names":["faInfo","FontAwesomeIcon","message","LoginForm","useState","useTranslation","router","agendas","Rest","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","t","loading","setLoading","messageApi","contextHolder","useMessage","validationFailed","warning","handleForgetPassword","values","emailAdmin","responseSelectEmail","cleanUsername","username","trim","operation","type","codeUser","email","then","response","success","error","login","password","valid","navigate","children","className","onFailedForm","onSuccess","onForgotPassword","icon"],"sources":["/home/gpt2008/Desktop/Clubs/club/club/club-ui/src/pages/login/Login.tsx"],"sourcesContent":["import { faInfo } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { message } from \"antd\";\nimport { Store } from \"antd/es/form/interface\";\nimport LoginForm from \"components/loginForm/LoginForm\";\nimport { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport router from \"router\";\nimport LoginOperation from \"types/operations/LoginOperation\";\nimport LoginOperationResponse from \"types/operations/LoginOperationResponse\";\nimport { agendas } from \"utils/router-utils\";\nimport { Rest } from \"utils/utils\";\nimport \"./login.scss\";\n\nfunction Login() {\n\tconst { t } = useTranslation([\"login\"]);\n\n\tconst [loading, setLoading] = useState<boolean>(false);\n\n\tconst [messageApi, contextHolder] = message.useMessage();\n\n\tconst validationFailed = () => {\n\t\tsetLoading(false);\n\t\tmessageApi.warning(t(\"emptyFieldsWarning\"));\n\t};\n\n\tconst handleForgetPassword = async (values: Store) => {\n\t\tvar emailAdmin: string = \"\";\n\t\tvar responseSelectEmail = null;\n\t\tvar cleanUsername = values.username.trim();\n\t\tresponseSelectEmail = await Rest<{ type: string; codeUser: string }, any>().operation({\n\t\t\ttype: \"SelectEmailAdminByCode\",\n\t\t\tcodeUser: cleanUsername,\n\t\t});\n\t\tif (responseSelectEmail != null) {\n\t\t\temailAdmin = responseSelectEmail[\"valueEmail\"];\n\t\t}\n\n\n\t\tRest<{ type: string; username: string; email: string }, number>()\n\t\t\t.operation({\n\t\t\t\ttype: \"RegeneratePassword\",\n\t\t\t\tusername: cleanUsername,\n\t\t\t\temail: emailAdmin,\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (response === 0) {\n\t\t\t\t\tmessageApi.success(\"Correo de recuperacion de contraseña solicitado con exito\");\n\t\t\t\t}\n\t\t\t\tif (response === 1) {\n\t\t\t\t\tmessageApi.error(\"Se ha producido un error al introducir el usuario\");\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tconst login = (values: Store) => {\n\t\tvar cleanUsername = values.username.trim();\n\t\tsetLoading(true);\n\t\tRest<LoginOperation, LoginOperationResponse>()\n\t\t\t.operation({\n\t\t\t\ttype: \"Login\",\n\t\t\t\tlogin: cleanUsername,\n\t\t\t\tpassword: values.password,\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\tif (response.valid) {\n\t\t\t\t\trouter.navigate(agendas);\n\t\t\t\t} else {\n\t\t\t\t\tmessageApi.error(t(\"invalidCredentials\"));\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{contextHolder}\n\t\t\t<div className=\"login__container\">\n\t\t\t\t<div className=\"login__container__left\">\n\t\t\t\t\t<h1 className=\"primary\">\n\t\t\t\t\t\t<strong>{t(\"accessArea\")}</strong>\n\t\t\t\t\t</h1>\n\t\t\t\t\t<p>{t(\"accessAreaWelcome\")}</p>\n\t\t\t\t\t<div className=\"login__container__left__forms\">\n\t\t\t\t\t\t<LoginForm\n\t\t\t\t\t\t\tonFailedForm={validationFailed}\n\t\t\t\t\t\t\tonSuccess={login}\n\t\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\t\tonForgotPassword={handleForgetPassword}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"login__info\">\n\t\t\t\t\t\t<FontAwesomeIcon icon={faInfo} />\n\t\t\t\t\t\t<p>{t(\"information\")}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"login__container__right\" />\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}