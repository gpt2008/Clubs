{"ast":null,"code":"import{notification}from\"antd\";import React from\"react\";import{withTranslation}from\"react-i18next\";import{Rest,TableUtils}from\"utils/utils\";import ScheduleActionsFormContainer from\"./ScheduleActionsFormContainer\";import ScheduleFormContainer from\"./ScheduleFormContainer\";import View from\"./ScheduleManagement\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";class ScheduleManagementContainer extends React.Component{constructor(){super(...arguments);this.state={dataCount:0,limit:0,page:1};this.loadData=()=>{Rest().operation({type:\"SelectProviderScheduleList\",idProvider:this.props.idProvider,limit:10,offset:(this.state.page-1)*this.state.limit}).then(response=>{this.setState({schedules:response.data,dataCount:response.dataCount});});};this.onChangePage=page=>{this.setState({page},()=>this.loadData());};this.onClickScheduleForm=(idSchedule,nameSchedule)=>{this.setState({scheduleModalVisible:true,scheduleModalKey:new Date().getTime(),idScheduleSelected:idSchedule,nameScheduleSelected:nameSchedule});};this.onCloseScheduleSlotsForm=save=>{this.setState({scheduleModalVisible:false,idScheduleSelected:undefined,nameScheduleSelected:undefined},()=>{if(save){notification[\"success\"]({message:this.props.t(\"titles:actionPerformed\")});this.loadData();}});};this.onClickScheduleSlotsForm=(idSchedule,nameSchedule,cloneSchedule)=>{this.setState({scheduleModalVisible:true,scheduleModalKey:new Date().getTime(),idScheduleSelected:idSchedule,nameScheduleSelected:nameSchedule,cloneSchedule});};this.onClickSchedulesAction=(idSchedule,nameSchedule,activate,drop)=>{if(activate){this.setState({scheduleActionsModalVisible:true,scheduleActionsModalKey:new Date().getTime(),idScheduleSelected:idSchedule,nameScheduleSelected:nameSchedule,scheduleActionsActivate:activate});}else{this.setState({scheduleActionsModalVisible:true,scheduleActionsModalKey:new Date().getTime(),idScheduleSelected:idSchedule,nameScheduleSelected:nameSchedule,scheduleActionsActivate:activate,scheduleActionsDrop:drop});}};this.onCloseScheduleActionsModal=save=>{this.setState({scheduleActionsModalVisible:false,idScheduleSelected:undefined,nameScheduleSelected:undefined,scheduleActionsActivate:undefined,scheduleActionsDrop:undefined},()=>{if(save){notification[\"success\"]({message:this.props.t(\"titles:actionPerformed\")});this.loadData();}});};}componentDidMount(){if(this.props.visible){this.setState(TableUtils.calculatePageSizeForMainTable(),()=>this.props.idProvider&&this.loadData());}}render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(View,{...this.state,visible:this.props.visible,nameProvider:this.props.nameProvider,onChangePage:this.onChangePage,onClickScheduleForm:this.onClickScheduleForm,onClickSchedulesAction:this.onClickSchedulesAction,onClickScheduleSlotsForm:this.onClickScheduleSlotsForm,onCancel:this.props.onClose}),/*#__PURE__*/_jsx(ScheduleFormContainer,{visible:this.state.scheduleModalVisible,idProvider:this.props.idProvider,nameProvider:this.props.nameProvider,idSchedule:this.state.idScheduleSelected,cloneSchedule:this.state.cloneSchedule,onClose:this.onCloseScheduleSlotsForm},this.state.scheduleModalKey),/*#__PURE__*/_jsx(ScheduleActionsFormContainer,{visible:this.state.scheduleActionsModalVisible,nameProvider:this.props.nameProvider,idSchedule:this.state.idScheduleSelected,nameSchedule:this.state.nameScheduleSelected,activate:this.state.scheduleActionsActivate,drop:this.state.scheduleActionsDrop,onClose:this.onCloseScheduleActionsModal},this.state.scheduleActionsModalKey)]});}}export default withTranslation(\"scheduleManagement\")(ScheduleManagementContainer);","map":{"version":3,"names":["notification","React","withTranslation","Rest","TableUtils","ScheduleActionsFormContainer","ScheduleFormContainer","View","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ScheduleManagementContainer","Component","constructor","arguments","state","dataCount","limit","page","loadData","operation","type","idProvider","props","offset","then","response","setState","schedules","data","onChangePage","onClickScheduleForm","idSchedule","nameSchedule","scheduleModalVisible","scheduleModalKey","Date","getTime","idScheduleSelected","nameScheduleSelected","onCloseScheduleSlotsForm","save","undefined","message","t","onClickScheduleSlotsForm","cloneSchedule","onClickSchedulesAction","activate","drop","scheduleActionsModalVisible","scheduleActionsModalKey","scheduleActionsActivate","scheduleActionsDrop","onCloseScheduleActionsModal","componentDidMount","visible","calculatePageSizeForMainTable","render","children","nameProvider","onCancel","onClose"],"sources":["/home/gpt2008/Desktop/Clubs/club/club/club-ui/src/components/providerSchedules/ScheduleManagementContainer.tsx"],"sourcesContent":["import { notification } from \"antd\";\nimport React from \"react\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport Schedule from \"types/entities/Schedule\";\nimport { MainTableBodyProps } from \"utils/tableUtils\";\nimport { Rest, TableUtils } from \"utils/utils\";\nimport ScheduleActionsFormContainer from \"./ScheduleActionsFormContainer\";\nimport ScheduleFormContainer from \"./ScheduleFormContainer\";\nimport View from \"./ScheduleManagement\";\n\ninterface IProps {\n\tvisible?: boolean;\n\tidProvider?: number;\n\tnameProvider?: string;\n\tonClose: () => void;\n}\n\nexport interface IState extends MainTableBodyProps {\n\tlimit: number;\n\tpage: number;\n\tdataCount: number;\n\tschedules?: Schedule[];\n\tidScheduleSelected?: number;\n\tnameScheduleSelected?: string;\n\tscheduleModalVisible?: boolean;\n\tscheduleModalKey?: number;\n\tcloneSchedule?: boolean;\n\tscheduleActionsModalVisible?: boolean;\n\tscheduleActionsModalKey?: number;\n\tscheduleActionsActivate?: boolean;\n\tscheduleActionsDrop?: boolean;\n}\n\nclass ScheduleManagementContainer extends React.Component<WithTranslation & IProps, IState> {\n\tpublic state: IState = {\n\t\tdataCount: 0,\n\t\tlimit: 0,\n\t\tpage: 1,\n\t};\n\n\tpublic componentDidMount() {\n\t\tif (this.props.visible) {\n\t\t\tthis.setState(\n\t\t\t\tTableUtils.calculatePageSizeForMainTable(),\n\t\t\t\t() => this.props.idProvider && this.loadData()\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic render() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<View\n\t\t\t\t\t{...this.state}\n\t\t\t\t\tvisible={this.props.visible}\n\t\t\t\t\tnameProvider={this.props.nameProvider}\n\t\t\t\t\tonChangePage={this.onChangePage}\n\t\t\t\t\tonClickScheduleForm={this.onClickScheduleForm}\n\t\t\t\t\tonClickSchedulesAction={this.onClickSchedulesAction}\n\t\t\t\t\tonClickScheduleSlotsForm={this.onClickScheduleSlotsForm}\n\t\t\t\t\tonCancel={this.props.onClose}\n\t\t\t\t/>\n\t\t\t\t<ScheduleFormContainer\n\t\t\t\t\tvisible={this.state.scheduleModalVisible}\n\t\t\t\t\tkey={this.state.scheduleModalKey}\n\t\t\t\t\tidProvider={this.props.idProvider!}\n\t\t\t\t\tnameProvider={this.props.nameProvider!}\n\t\t\t\t\tidSchedule={this.state.idScheduleSelected}\n\t\t\t\t\tcloneSchedule={this.state.cloneSchedule}\n\t\t\t\t\tonClose={this.onCloseScheduleSlotsForm}\n\t\t\t\t/>\n\t\t\t\t<ScheduleActionsFormContainer\n\t\t\t\t\tvisible={this.state.scheduleActionsModalVisible}\n\t\t\t\t\tkey={this.state.scheduleActionsModalKey}\n\t\t\t\t\tnameProvider={this.props.nameProvider!}\n\t\t\t\t\tidSchedule={this.state.idScheduleSelected}\n\t\t\t\t\tnameSchedule={this.state.nameScheduleSelected}\n\t\t\t\t\tactivate={this.state.scheduleActionsActivate}\n\t\t\t\t\tdrop={this.state.scheduleActionsDrop}\n\t\t\t\t\tonClose={this.onCloseScheduleActionsModal}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t}\n\n\tprivate loadData = () => {\n\t\tRest<{ type: string; idProvider: number; limit: number; offset: number }, any>()\n\t\t\t.operation({\n\t\t\t\ttype: \"SelectProviderScheduleList\",\n\t\t\t\tidProvider: this.props.idProvider!,\n\t\t\t\tlimit: 10,\n\t\t\t\toffset: (this.state.page - 1) * this.state.limit,\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tschedules: response.data,\n\t\t\t\t\tdataCount: response.dataCount,\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\tprivate onChangePage = (page: number) => {\n\t\tthis.setState({ page }, () => this.loadData());\n\t};\n\n\tprivate onClickScheduleForm = (idSchedule?: number, nameSchedule?: string) => {\n\t\tthis.setState({\n\t\t\tscheduleModalVisible: true,\n\t\t\tscheduleModalKey: new Date().getTime(),\n\t\t\tidScheduleSelected: idSchedule,\n\t\t\tnameScheduleSelected: nameSchedule,\n\t\t});\n\t};\n\n\tprivate onCloseScheduleSlotsForm = (save: boolean) => {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tscheduleModalVisible: false,\n\t\t\t\tidScheduleSelected: undefined,\n\t\t\t\tnameScheduleSelected: undefined,\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif (save) {\n\t\t\t\t\tnotification[\"success\"]({\n\t\t\t\t\t\tmessage: this.props.t(\"titles:actionPerformed\"),\n\t\t\t\t\t});\n\t\t\t\t\tthis.loadData();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tprivate onClickScheduleSlotsForm = (\n\t\tidSchedule?: number,\n\t\tnameSchedule?: string,\n\t\tcloneSchedule?: boolean\n\t) => {\n\t\tthis.setState({\n\t\t\tscheduleModalVisible: true,\n\t\t\tscheduleModalKey: new Date().getTime(),\n\t\t\tidScheduleSelected: idSchedule,\n\t\t\tnameScheduleSelected: nameSchedule,\n\t\t\tcloneSchedule,\n\t\t});\n\t};\n\n\tprivate onClickSchedulesAction = (\n\t\tidSchedule: number,\n\t\tnameSchedule: string,\n\t\tactivate: boolean,\n\t\tdrop: boolean\n\t) => {\n\t\tif (activate) {\n\t\t\tthis.setState({\n\t\t\t\tscheduleActionsModalVisible: true,\n\t\t\t\tscheduleActionsModalKey: new Date().getTime(),\n\t\t\t\tidScheduleSelected: idSchedule,\n\t\t\t\tnameScheduleSelected: nameSchedule,\n\t\t\t\tscheduleActionsActivate: activate,\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tscheduleActionsModalVisible: true,\n\t\t\t\tscheduleActionsModalKey: new Date().getTime(),\n\t\t\t\tidScheduleSelected: idSchedule,\n\t\t\t\tnameScheduleSelected: nameSchedule,\n\t\t\t\tscheduleActionsActivate: activate,\n\t\t\t\tscheduleActionsDrop: drop,\n\t\t\t});\n\t\t}\n\t};\n\n\tprivate onCloseScheduleActionsModal = (save: boolean) => {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tscheduleActionsModalVisible: false,\n\t\t\t\tidScheduleSelected: undefined,\n\t\t\t\tnameScheduleSelected: undefined,\n\t\t\t\tscheduleActionsActivate: undefined,\n\t\t\t\tscheduleActionsDrop: undefined,\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif (save) {\n\t\t\t\t\tnotification[\"success\"]({\n\t\t\t\t\t\tmessage: this.props.t(\"titles:actionPerformed\"),\n\t\t\t\t\t});\n\t\t\t\t\tthis.loadData();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n}\n\nexport default withTranslation(\"scheduleManagement\")(ScheduleManagementContainer);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}