{"ast":null,"code":"import React from\"react\";import{withTranslation}from\"react-i18next\";import{Rest}from\"utils/utils\";import View from\"./SpecialityForm\";import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";class SpecialityFormContainer extends React.Component{constructor(){super(...arguments);this.state={loaded:false,errorFields:[]};this.validateAndSave=form=>{form.validateFields().then(values=>{this.internalValidation(values,true);}).catch(info=>{this.internalValidation(info.values,false);});};this.internalValidation=(values,formValidationSucceded)=>{var _this$validate;(_this$validate=this.validate(values))===null||_this$validate===void 0?void 0:_this$validate.then(errors=>{if(formValidationSucceded&&(!errors||errors.length===0)){this.save(values);}else{this.setState({errorFields:errors});}});};this.validate=values=>{return new Promise(resolve=>{let errors=[];resolve(errors);});};this.save=async values=>{Rest().operation({type:this.props.idSpeciality?\"EditSpeciality\":\"NewSpeciality\",idSpeciality:this.props.idSpeciality,codeSpeciality:values.codeSpeciality,nameSpeciality:values.nameSpeciality}).then(()=>this.props.onClose(true));};}componentDidMount(){this.setState({loaded:true});}render(){return this.state.loaded?/*#__PURE__*/_jsx(View,{visible:this.props.visible,idSpeciality:this.props.idSpeciality,codeSpeciality:this.props.codeSpeciality,nameSpeciality:this.props.nameSpeciality,onCancel:()=>this.props.onClose(false),onSubmit:this.validateAndSave}):/*#__PURE__*/_jsx(_Fragment,{});}}export default withTranslation(\"specialityForm\")(SpecialityFormContainer);","map":{"version":3,"names":["React","withTranslation","Rest","View","jsx","_jsx","Fragment","_Fragment","SpecialityFormContainer","Component","constructor","arguments","state","loaded","errorFields","validateAndSave","form","validateFields","then","values","internalValidation","catch","info","formValidationSucceded","_this$validate","validate","errors","length","save","setState","Promise","resolve","operation","type","props","idSpeciality","codeSpeciality","nameSpeciality","onClose","componentDidMount","render","visible","onCancel","onSubmit"],"sources":["/home/gpt2008/Desktop/Clubs/club/club/club-ui/src/pages/specialidades/SpecialityFormContainer.tsx"],"sourcesContent":["import React from \"react\";\nimport { FormInstance } from \"antd/es/form/Form\";\nimport { Store } from \"antd/lib/form/interface\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport FormErrorField from \"utils/form/formErrorField\";\nimport { Rest } from \"utils/utils\";\nimport View from \"./SpecialityForm\";\n\ninterface IProps {\n\tvisible?: boolean;\n\tidSpeciality?: number;\n\tcodeSpeciality?: string;\n\tnameSpeciality?: string;\n\tonClose: (save: boolean) => void;\n}\nexport interface IState {\n    errorFields: FormErrorField[];\n\tloaded?: boolean;\n}\n\nclass SpecialityFormContainer extends React.Component<WithTranslation & IProps> {\n\tpublic state: IState = {\n        loaded: false,\n\t\terrorFields: [],\n\t};\n\n\tpublic componentDidMount() {\n\t\tthis.setState({\n            loaded: true,\n        });\n\t}\n\t\n\tpublic render() {\n\t\treturn this.state.loaded ? (\n\t\t\t<View\n\t\t\t\tvisible={this.props.visible}\n\t\t\t\tidSpeciality={this.props.idSpeciality}\n\t\t\t\tcodeSpeciality={this.props.codeSpeciality}\n\t\t\t\tnameSpeciality={this.props.nameSpeciality}\n\t\t\t\tonCancel={() => this.props.onClose(false)}\n\t\t\t\tonSubmit={this.validateAndSave}\n\t\t\t/>\n\t\t) : (\n\t\t\t<></>\n\t\t);\n\t}\n\n    private validateAndSave = (form: FormInstance) => {\n\t\tform\n\t\t\t.validateFields()\n\t\t\t.then((values) => {\n\t\t\t\tthis.internalValidation(values, true);\n\t\t\t})\n\t\t\t.catch((info) => {\n\t\t\t\tthis.internalValidation(info.values, false);\n\t\t\t});\n\t};\n\n\tprivate internalValidation = (values: Store, formValidationSucceded: boolean) => {\n\t\tthis.validate(values)?.then((errors) => {\n\t\t\tif (formValidationSucceded && (!errors || errors.length === 0)) {\n\t\t\t\tthis.save(values);\n\t\t\t} else {\n\t\t\t\tthis.setState({ errorFields: errors });\n\t\t\t}\n\t\t});\n\t};\n\n\tprivate validate = (values: Store) => {\n\t\treturn new Promise((resolve: (f: FormErrorField[]) => void) => {\n\t\t\tlet errors: FormErrorField[] = [];\n\n\t\t\tresolve(errors);\n\t\t});\n\t};\n\n\tprivate save = async (values: Store) => {\n\t\tRest<\n\t\t\t{\n\t\t\t\ttype: string;\n\t\t\t\tidSpeciality?: number;\n\t\t\t\tcodeSpeciality?:string;\n                nameSpeciality?: string;\n\t\t\t},\n\t\t\tany\n\t\t>()\n\t\t\t.operation({\n\t\t\t\ttype: this.props.idSpeciality ? \"EditSpeciality\" : \"NewSpeciality\",\n\t\t\t\tidSpeciality: this.props.idSpeciality,\n\t\t\t\tcodeSpeciality: values.codeSpeciality,\n                nameSpeciality: values.nameSpeciality\n\t\t\t})\n\t\t\t.then(() => this.props.onClose(true));\n\t};\n}\n\nexport default withTranslation(\"specialityForm\")(SpecialityFormContainer);\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAGzB,OAA0BC,eAAe,KAAQ,eAAe,CAEhE,OAASC,IAAI,KAAQ,aAAa,CAClC,MAAO,CAAAC,IAAI,KAAM,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAcpC,KAAM,CAAAC,uBAAuB,QAAS,CAAAR,KAAK,CAACS,SAAoC,CAAAC,YAAA,WAAAC,SAAA,OACxEC,KAAK,CAAW,CAChBC,MAAM,CAAE,KAAK,CACnBC,WAAW,CAAE,EACd,CAAC,MAuBUC,eAAe,CAAIC,IAAkB,EAAK,CACpDA,IAAI,CACFC,cAAc,CAAC,CAAC,CAChBC,IAAI,CAAEC,MAAM,EAAK,CACjB,IAAI,CAACC,kBAAkB,CAACD,MAAM,CAAE,IAAI,CAAC,CACtC,CAAC,CAAC,CACDE,KAAK,CAAEC,IAAI,EAAK,CAChB,IAAI,CAACF,kBAAkB,CAACE,IAAI,CAACH,MAAM,CAAE,KAAK,CAAC,CAC5C,CAAC,CAAC,CACJ,CAAC,MAEOC,kBAAkB,CAAG,CAACD,MAAa,CAAEI,sBAA+B,GAAK,KAAAC,cAAA,CAChF,CAAAA,cAAA,KAAI,CAACC,QAAQ,CAACN,MAAM,CAAC,UAAAK,cAAA,iBAArBA,cAAA,CAAuBN,IAAI,CAAEQ,MAAM,EAAK,CACvC,GAAIH,sBAAsB,GAAK,CAACG,MAAM,EAAIA,MAAM,CAACC,MAAM,GAAK,CAAC,CAAC,CAAE,CAC/D,IAAI,CAACC,IAAI,CAACT,MAAM,CAAC,CAClB,CAAC,IAAM,CACN,IAAI,CAACU,QAAQ,CAAC,CAAEf,WAAW,CAAEY,MAAO,CAAC,CAAC,CACvC,CACD,CAAC,CAAC,CACH,CAAC,MAEOD,QAAQ,CAAIN,MAAa,EAAK,CACrC,MAAO,IAAI,CAAAW,OAAO,CAAEC,OAAsC,EAAK,CAC9D,GAAI,CAAAL,MAAwB,CAAG,EAAE,CAEjCK,OAAO,CAACL,MAAM,CAAC,CAChB,CAAC,CAAC,CACH,CAAC,MAEOE,IAAI,CAAG,KAAO,CAAAT,MAAa,EAAK,CACvCjB,IAAI,CAQF,CAAC,CACD8B,SAAS,CAAC,CACVC,IAAI,CAAE,IAAI,CAACC,KAAK,CAACC,YAAY,CAAG,gBAAgB,CAAG,eAAe,CAClEA,YAAY,CAAE,IAAI,CAACD,KAAK,CAACC,YAAY,CACrCC,cAAc,CAAEjB,MAAM,CAACiB,cAAc,CACzBC,cAAc,CAAElB,MAAM,CAACkB,cACpC,CAAC,CAAC,CACDnB,IAAI,CAAC,IAAM,IAAI,CAACgB,KAAK,CAACI,OAAO,CAAC,IAAI,CAAC,CAAC,CACvC,CAAC,EAnEMC,iBAAiBA,CAAA,CAAG,CAC1B,IAAI,CAACV,QAAQ,CAAC,CACJhB,MAAM,CAAE,IACZ,CAAC,CAAC,CACT,CAEO2B,MAAMA,CAAA,CAAG,CACf,MAAO,KAAI,CAAC5B,KAAK,CAACC,MAAM,cACvBR,IAAA,CAACF,IAAI,EACJsC,OAAO,CAAE,IAAI,CAACP,KAAK,CAACO,OAAQ,CAC5BN,YAAY,CAAE,IAAI,CAACD,KAAK,CAACC,YAAa,CACtCC,cAAc,CAAE,IAAI,CAACF,KAAK,CAACE,cAAe,CAC1CC,cAAc,CAAE,IAAI,CAACH,KAAK,CAACG,cAAe,CAC1CK,QAAQ,CAAEA,CAAA,GAAM,IAAI,CAACR,KAAK,CAACI,OAAO,CAAC,KAAK,CAAE,CAC1CK,QAAQ,CAAE,IAAI,CAAC5B,eAAgB,CAC/B,CAAC,cAEFV,IAAA,CAAAE,SAAA,GAAI,CACJ,CACF,CAiDD,CAEA,cAAe,CAAAN,eAAe,CAAC,gBAAgB,CAAC,CAACO,uBAAuB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}