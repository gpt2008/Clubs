{"ast":null,"code":"import{Form,message}from\"antd\";//import FormErrorField from \"../utils/form/formErrorField\";\nimport{useTranslation}from\"react-i18next\";import FormUtils from\"utils/formUtils\";import'../newPassword/NewPassword.scss';import{Rest}from\"utils/utils\";import{useState}from\"react\";import{useParams}from\"react-router-dom\";import router from\"router\";import UpdatePassewordForm from\"components/updatePasswordForm/UpdatePasswordForm\";import{agendas}from\"utils/router-utils\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChangePassword=()=>{const{t}=useTranslation(['changePassword']);const[form]=Form.useForm();const[errorFields,setErrorFields]=useState();let{token}=useParams();const setupNewPassword=form=>{setErrorFields([]);formValidation(form);};const formValidation=form=>{form.validateFields().then(values=>{internalValidation(values,true);}).catch(info=>{internalValidation(info.values,false);});};const internalValidation=(values,formValidationSucceded)=>{validatePassword(values).then(errors=>{if(formValidationSucceded&&(!errors||errors.length===0)){save(values);}else{setErrorFields(errors);}});};const validatePassword=values=>{return new Promise(resolve=>{Rest().operation({type:'ValidateAltaPassword',currentPassword:values.password,password:values.newPassword,repeatedPassword:values.repeatedPassword//token: \"a\",\n}).then(result=>{let errors=[];if(result&&result.incorrectCurrentPassword){const passError={fieldName:'password',errorMessage:t('incorrectCurrentPassword')};errors=FormUtils.addError(errors,passError);}if(result&&result.incorrectPassword){const passError={fieldName:'newPassword',errorMessage:t('incorrectPasswordSecurity')};errors=FormUtils.addError(errors,passError);}if(result&&result.incorrectRepeatedPassword){const passError={fieldName:'repeatedPassword',errorMessage:t('incorrectPasswordConfirmation')};errors=FormUtils.addError(errors,passError);}resolve(errors);});});};const save=values=>{Rest().operation({type:'UpdatePassword',newPassword:values.newPassword}).then(response=>{if(response){router.navigate(agendas);message.success({style:{cursor:'pointer'},key:'changePassword:changePasswordSuccessful',content:t('changePassword:changePasswordSuccessful'),duration:0,onClick:()=>message.destroy('changePassword:changePasswordSuccessful')});}else{router.navigate('/oops');}});};return/*#__PURE__*/_jsx(\"div\",{className:\"forget-password-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"content title\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Cambiar contrase\\xF1a\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"content-inner\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-container password-box-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"intro-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:t(\"newPassword\")}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:t(\"charactersLength\")}),/*#__PURE__*/_jsx(\"li\",{children:t(\"capitalConditionLabel\")}),/*#__PURE__*/_jsx(\"li\",{children:t(\"numberConditionLabel\")})]})]}),/*#__PURE__*/_jsx(UpdatePassewordForm,{form:form,changePassword:true,errorFields:errorFields,setupPassword:setupNewPassword})]})})]})});};export default ChangePassword;","map":{"version":3,"names":["Form","message","useTranslation","FormUtils","Rest","useState","useParams","router","UpdatePassewordForm","agendas","jsx","_jsx","jsxs","_jsxs","ChangePassword","t","form","useForm","errorFields","setErrorFields","token","setupNewPassword","formValidation","validateFields","then","values","internalValidation","catch","info","formValidationSucceded","validatePassword","errors","length","save","Promise","resolve","operation","type","currentPassword","password","newPassword","repeatedPassword","result","incorrectCurrentPassword","passError","fieldName","errorMessage","addError","incorrectPassword","incorrectRepeatedPassword","response","navigate","success","style","cursor","key","content","duration","onClick","destroy","className","children","changePassword","setupPassword"],"sources":["/home/gpt2008/Desktop/Clubs/club/club/club-ui/src/pages/changePassword/ChangePassword.tsx"],"sourcesContent":["\nimport { Form, FormInstance, message } from \"antd\";\n//import FormErrorField from \"../utils/form/formErrorField\";\nimport { useTranslation } from \"react-i18next\";\nimport FormUtils from \"utils/formUtils\";\nimport '../newPassword/NewPassword.scss';\nimport { Store } from \"antd/es/form/interface\";\nimport { Rest } from \"utils/utils\";\nimport  FormErrorField  from \"utils/form/formErrorField\";\nimport { useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport router from \"router\";\nimport UpdatePassewordForm from \"components/updatePasswordForm/UpdatePasswordForm\";\nimport { agendas } from \"utils/router-utils\";\n\nconst ChangePassword = () => {\n    const { t } = useTranslation(['changePassword']);\n\n    const [form] = Form.useForm();\n    const [errorFields, setErrorFields] = useState<FormErrorField[]>();\n\n    let { token } = useParams();\n    \n\n    const setupNewPassword = (form: FormInstance) => {\n        setErrorFields([]);\n        formValidation(form);\n        \n    }\n\n    const formValidation = (form: FormInstance) => {\n        form.validateFields().then(values => {\n            internalValidation(values, true);\n        }).catch(info => {\n            internalValidation(info.values, false);\n        });\n    }\n\n    const internalValidation = (values: Store, formValidationSucceded: boolean) => {\n        validatePassword(values).then(errors => {\n            if (formValidationSucceded && (!errors || errors.length === 0)) {\n                save(values);\n            } else {\n                setErrorFields(errors);\n            }\n        });\n    }\n\n    const validatePassword = (values: Store) => {\n        return new Promise((resolve: (f: FormErrorField[]) => void) => {\n            Rest<{type: string, password: string,currentPassword:string, repeatedPassword: string}, {incorrectCurrentPassword:boolean, incorrectPassword: boolean, incorrectRepeatedPassword: boolean}>().operation({\n                type: 'ValidateAltaPassword',\n                currentPassword: values.password,\n                password: values.newPassword,\n                repeatedPassword: values.repeatedPassword,\n                //token: \"a\",\n            }).then(result => {\n                let errors: FormErrorField[] = [];\n\n                if (result && result.incorrectCurrentPassword) {\n                    const passError = {fieldName: 'password', \n                        errorMessage: t('incorrectCurrentPassword')};\n\n                    errors = FormUtils.addError(errors, passError);\n                }\n\n                if (result && result.incorrectPassword) {\n                    const passError = {\n                        fieldName: 'newPassword',\n                        errorMessage: t('incorrectPasswordSecurity')\n                    };\n\n                    errors = FormUtils.addError(errors, passError);\n                }\n\n                if (result && result.incorrectRepeatedPassword) {\n                    const passError = {\n                        fieldName: 'repeatedPassword',\n                        errorMessage: t('incorrectPasswordConfirmation')\n                    };\n\n                    errors = FormUtils.addError(errors, passError);\n                }\n\n                resolve(errors);\n            });\n        });\n    }\n\n    const save = (values: Store) => {\n        Rest<{type: string, newPassword: string}, boolean>().operation({\n            type: 'UpdatePassword',\n            newPassword: values.newPassword\n        }).then(response => {\n            if (response) {\n                router.navigate(agendas);\n                message.success({\n                    style: {cursor: 'pointer'},\n                    key: 'changePassword:changePasswordSuccessful',\n                    content: t('changePassword:changePasswordSuccessful'),\n                    duration: 0,\n                    onClick: () => message.destroy('changePassword:changePasswordSuccessful')\n                });\n            } else {\n                router.navigate('/oops');\n            }\n        });\n    }\n\n    return (\n\n        <div className=\"forget-password-container\">\n\t\t\t<div className=\"content\">\n\t\t\t\t<h3 className=\"content title\">\n\t\t\t\t\t<strong>Cambiar contrase√±a</strong>\n\t\t\t\t</h3>\n\t\t\t\t<div className=\"content-inner\">\n\t\t\t\t\t<div className=\"welcome-container password-box-container\">\n\t\t\t\t\t\t<div className=\"intro-container\">\n\t\t\t\t\t\t\t<p>{t(\"newPassword\")}</p>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>{t(\"charactersLength\")}</li>\n\t\t\t\t\t\t\t\t<li>{t(\"capitalConditionLabel\")}</li>\n\t\t\t\t\t\t\t\t<li>{t(\"numberConditionLabel\")}</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<UpdatePassewordForm\n                            form={form}\n                            changePassword={true}\n                            errorFields={errorFields}\n                            setupPassword={setupNewPassword}\n                        />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n    );\n}\n\nexport default ChangePassword;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}