{"ast":null,"code":"import React from\"react\";import{withTranslation}from\"react-i18next\";import{Rest}from\"utils/utils\";import View from\"./SubspecialityForm\";import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";class SubspecialityFormContainer extends React.Component{constructor(){super(...arguments);this.state={loaded:false,errorFields:[]};this.validateAndSave=form=>{form.validateFields().then(values=>{this.internalValidation(values,true);}).catch(info=>{this.internalValidation(info.values,false);});};this.internalValidation=(values,formValidationSucceded)=>{var _this$validate;(_this$validate=this.validate(values))===null||_this$validate===void 0?void 0:_this$validate.then(errors=>{if(formValidationSucceded&&(!errors||errors.length===0)){this.save(values);}else{this.setState({errorFields:errors});}});};this.validate=values=>{return new Promise(resolve=>{let errors=[];resolve(errors);});};this.save=async values=>{Rest().operation({type:this.props.idSubspecialitySelected?\"EditSubspeciality\":\"NewSubspeciality\",idSubspeciality:this.props.idSubspecialitySelected,codeSubspeciality:values.codeSubspeciality,nameSubspeciality:values.nameSubspeciality,idSpeciality:this.props.idSpecialitySelectedSet?this.props.idSpecialitySelectedSet:this.props.idSpecialitySelected}).then(()=>this.props.onClose(true));};}componentDidMount(){this.setState({loaded:true});}render(){return this.state.loaded?/*#__PURE__*/_jsx(View,{visible:this.props.subspecialityFormVisible,idSubspeciality:this.props.idSubspecialitySelected,codeSubspeciality:this.props.codeSubspeciality,nameSubspeciality:this.props.nameSubspecialitySelected,onCancel:()=>this.props.onClose(false),onSubmit:this.validateAndSave,idSpeciality:this.props.idSpecialitySelectedSet?this.props.idSpecialitySelectedSet:this.props.idSpecialitySelected,nameSpeciality:this.props.nameSubspecialitySelected,specialities:this.props.specialities,filterOptions:this.props.filterOptions,onChangeSearch:this.props.onChangeSearch}):/*#__PURE__*/_jsx(_Fragment,{});}}export default withTranslation(\"subspecialityForm\")(SubspecialityFormContainer);","map":{"version":3,"names":["React","withTranslation","Rest","View","jsx","_jsx","Fragment","_Fragment","SubspecialityFormContainer","Component","constructor","arguments","state","loaded","errorFields","validateAndSave","form","validateFields","then","values","internalValidation","catch","info","formValidationSucceded","_this$validate","validate","errors","length","save","setState","Promise","resolve","operation","type","props","idSubspecialitySelected","idSubspeciality","codeSubspeciality","nameSubspeciality","idSpeciality","idSpecialitySelectedSet","idSpecialitySelected","onClose","componentDidMount","render","visible","subspecialityFormVisible","nameSubspecialitySelected","onCancel","onSubmit","nameSpeciality","specialities","filterOptions","onChangeSearch"],"sources":["/home/gpt2008/Desktop/Clubs/club/club/dentycard-policlinico-bo-ui/src/pages/subspecialidades/SubspecialityFormContainer.tsx"],"sourcesContent":["import React from \"react\";\nimport { FormInstance } from \"antd/es/form/Form\";\nimport { Store } from \"antd/lib/form/interface\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport FormErrorField from \"utils/form/formErrorField\";\nimport { Rest } from \"utils/utils\";\nimport View from \"./SubspecialityForm\";\nimport {IState as IStateContainer} from \"./SubspecialityListContainer\";\n\ninterface IProps {\n\tonClose: (save: boolean) => void;\n\tfilterOptions: (inputValue: string) => void;\n\tonChangeSearch: (idSpeciality?: number) => void;\n}\nexport interface IState {\n    errorFields: FormErrorField[];\n\tloaded?: boolean;\n}\n\nclass SubspecialityFormContainer extends React.Component<WithTranslation & IProps & IStateContainer> {\n\tpublic state: IState = {\n        loaded: false,\n\t\terrorFields: [],\n\t};\n\n\tpublic componentDidMount() {\n\t\tthis.setState({\n            loaded: true,\n        });\n\t}\n\t\n\tpublic render() {\n\t\treturn this.state.loaded ? (\n\t\t\t<View\n\t\t\t\tvisible={this.props.subspecialityFormVisible}\n\t\t\t\tidSubspeciality={this.props.idSubspecialitySelected}\n\t\t\t\tcodeSubspeciality={this.props.codeSubspeciality}\n\t\t\t\tnameSubspeciality={this.props.nameSubspecialitySelected}\n\t\t\t\tonCancel={() => this.props.onClose(false)}\n\t\t\t\tonSubmit={this.validateAndSave}\n\t\t\t\tidSpeciality={this.props.idSpecialitySelectedSet ? this.props.idSpecialitySelectedSet : this.props.idSpecialitySelected}\n\t\t\t\tnameSpeciality={this.props.nameSubspecialitySelected}\n\t\t\t\tspecialities={this.props.specialities}\n\t\t\t\tfilterOptions={this.props.filterOptions}\n\t\t\t\tonChangeSearch={this.props.onChangeSearch}\n\t\t\t/>\n\t\t) : (\n\t\t\t<></>\n\t\t);\n\t}\n\n\tprivate validateAndSave = (form: FormInstance) => {\n\t\tform\n\t\t\t.validateFields()\n\t\t\t.then((values) => {\n\t\t\t\tthis.internalValidation(values, true);\n\t\t\t})\n\t\t\t.catch((info) => {\n\t\t\t\tthis.internalValidation(info.values, false);\n\t\t\t});\n\t};\n\n\tprivate internalValidation = (values: Store, formValidationSucceded: boolean) => {\n\t\tthis.validate(values)?.then((errors) => {\n\t\t\tif (formValidationSucceded && (!errors || errors.length === 0)) {\n\t\t\t\tthis.save(values);\n\t\t\t} else {\n\t\t\t\tthis.setState({ errorFields: errors });\n\t\t\t}\n\t\t});\n\t};\n\n\tprivate validate = (values: Store) => {\n\t\treturn new Promise((resolve: (f: FormErrorField[]) => void) => {\n\t\t\tlet errors: FormErrorField[] = [];\n\t\t\tresolve(errors);\n\t\t});\n\t};\n\n\tprivate save = async (values: Store) => {\n\t\tRest<\n\t\t\t{\n\t\t\t\ttype: string;\n\t\t\t\tidSubspeciality?: number;\n\t\t\t\tcodeSubspeciality?: string;\n\t\t\t\tnameSubspeciality?: string;\n\t\t\t\tidSpeciality?: number;\n\t\t\t},\n\t\t\tany\n\t\t>()\n\t\t\t.operation({\n\t\t\t\ttype: this.props.idSubspecialitySelected ? \"EditSubspeciality\" : \"NewSubspeciality\",\n\t\t\t\tidSubspeciality: this.props.idSubspecialitySelected,\n\t\t\t\tcodeSubspeciality: values.codeSubspeciality,\n\t\t\t\tnameSubspeciality: values.nameSubspeciality,\n\t\t\t\tidSpeciality: this.props.idSpecialitySelectedSet ? this.props.idSpecialitySelectedSet : this.props.idSpecialitySelected\n\t\t\t})\n\t\t\t.then(() => this.props.onClose(true));\n\t\t\n\t};\n}\n\nexport default withTranslation(\"subspecialityForm\")(SubspecialityFormContainer);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}