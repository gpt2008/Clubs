{"ast":null,"code":"import{notification}from\"antd\";import React,{createElement as _createElement}from\"react\";import{withTranslation}from\"react-i18next\";import{Rest}from\"utils/utils\";import UTILS from\"../../utils/tableUtils\";import View from\"./SubspecialityList\";import SubspecialityFormContainer from\"./SubspecialityFormContainer\";import SubspecialityRemoveConfirmation from\"./SubspecialityRemoveConfirmation\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";class SubspecialityListContainer extends React.Component{constructor(){super(...arguments);this.state={};this.loadData=(offset,nameSubspeciality,idSpeciality)=>{if(offset)this.setState({page:offset});let limit=UTILS.calculatePageSizeForMainTableOther().limit;Rest().operation({type:\"SelectSubespecialidades\",limit:limit,offset:offset?(offset-1)*limit:0,filter:nameSubspeciality,idSpeciality:idSpeciality}).then(response=>{this.setState({subspecialities:response.data,countData:Number(response.dataCount),limit:response.limit});});};this.removeSubspeciality=()=>{Rest().operation({type:\"DeleteSubespecialidad\",idSubspeciality:this.state.idSubspecialitySelected,idSpeciality:this.state.idSpecialitySelected}).then(()=>{this.onCloseRemoveSubspeciality(true);});};this.onClickRemoveSubspeciality=(idSubspeciality,nameSubspeciality,idSpecialitySelected)=>{this.setState({idSubspecialitySelected:idSubspeciality,nameSubspecialitySelected:nameSubspeciality,removeSubspecialityVisible:true,removeSubspecialityKey:new Date().getTime(),idSpecialitySelected:idSpecialitySelected});};this.onCloseRemoveSubspeciality=save=>{this.setState({idSubspecialitySelected:undefined,nameSubspecialitySelected:undefined,removeSubspecialityVisible:false,idSpecialitySelected:undefined},()=>save&&this.loadData(this.state.page));};this.onClickEditSubspecialityForm=(idSubspecialitySelected,codeSubspecialitySelected,nameSubspecialitySelected,idSpecialitySelected,nameSpecialitySelected)=>{this.onfilterOptions(nameSpecialitySelected);this.setState({subspecialityFormVisible:true,subspecialityFormKey:new Date().getTime(),idSubspecialitySelected:idSubspecialitySelected,codeSubspeciality:codeSubspecialitySelected,nameSubspecialitySelected:nameSubspecialitySelected,idSpecialitySelected:idSpecialitySelected,nameSpecialitySelected:nameSpecialitySelected});};this.onCloseEditSubspecialityForm=save=>{this.setState({subspecialityFormVisible:false,idSubspecialitySelected:undefined,codeSubspeciality:undefined,nameSubspecialitySelected:undefined,idSpecialitySelected:undefined,nameSpecialitySelected:undefined,idSpecialitySelectedSet:undefined},()=>{if(save){notification[\"success\"]({message:this.props.t(\"titles:actionPerformed\")});this.loadData(this.state.page);}});};this.onfilterOptions=inputValue=>{Rest().operation({type:\"GetEspecialidades\",filter:inputValue}).then(response=>{this.setState({specialities:response});});};this.onChangeSubspeciality=idSpecialitySelected=>{this.setState({idSpecialitySelectedSet:idSpecialitySelected});};}componentDidMount(){this.loadData();}render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(View,{...this.state,limit:this.state.limit?this.state.limit:1,countData:this.state.countData?this.state.countData:0,page:this.state.page?this.state.page:1,loadSubspecialityData:this.loadData,onClickEditSubspecialityForm:this.onClickEditSubspecialityForm,onClickRemoveSubspeciality:this.onClickRemoveSubspeciality,filterOptions:this.onfilterOptions,onChangeSearch:this.onChangeSubspeciality}),/*#__PURE__*/_createElement(SubspecialityFormContainer,{...this.state,key:this.state.subspecialityFormKey,onClose:this.onCloseEditSubspecialityForm,filterOptions:this.onfilterOptions,onChangeSearch:this.onChangeSubspeciality}),/*#__PURE__*/_jsx(SubspecialityRemoveConfirmation,{nameSubspeciality:this.state.nameSubspecialitySelected,visible:this.state.removeSubspecialityVisible,onClose:this.onCloseRemoveSubspeciality,removeSubspeciality:this.removeSubspeciality},this.state.removeSubspecialityKey)]});}}export default withTranslation(\"subspecialityList\")(SubspecialityListContainer);","map":{"version":3,"names":["notification","React","createElement","_createElement","withTranslation","Rest","UTILS","View","SubspecialityFormContainer","SubspecialityRemoveConfirmation","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SubspecialityListContainer","Component","constructor","arguments","state","loadData","offset","nameSubspeciality","idSpeciality","setState","page","limit","calculatePageSizeForMainTableOther","operation","type","filter","then","response","subspecialities","data","countData","Number","dataCount","removeSubspeciality","idSubspeciality","idSubspecialitySelected","idSpecialitySelected","onCloseRemoveSubspeciality","onClickRemoveSubspeciality","nameSubspecialitySelected","removeSubspecialityVisible","removeSubspecialityKey","Date","getTime","save","undefined","onClickEditSubspecialityForm","codeSubspecialitySelected","nameSpecialitySelected","onfilterOptions","subspecialityFormVisible","subspecialityFormKey","codeSubspeciality","onCloseEditSubspecialityForm","idSpecialitySelectedSet","message","props","t","inputValue","specialities","onChangeSubspeciality","componentDidMount","render","children","loadSubspecialityData","filterOptions","onChangeSearch","key","onClose","visible"],"sources":["/home/gpt2008/Desktop/Clubs/club/club/dentycard-policlinico-bo-ui/src/pages/subspecialidades/SubspecialityListContainer.tsx"],"sourcesContent":["import { notification } from \"antd\";\nimport React from \"react\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport SubspecialityDetails from \"types/entities/SubEspecialidad\";\nimport { Rest } from \"utils/utils\";\nimport UTILS from \"../../utils/tableUtils\"\nimport View from \"./SubspecialityList\";\nimport SubspecialityFormContainer from \"./SubspecialityFormContainer\";\nimport SubspecialityRemoveConfirmation from \"./SubspecialityRemoveConfirmation\"\nimport SpecialityDetails from \"types/entities/Especialidad\";\n\nexport interface IState {\n\tsubspecialities?: SubspecialityDetails[];\n\tloaded?: boolean;\n\tsubspecialityFormVisible?: boolean;\n\tsubspecialityFormKey?: number;\n\tformConfigClosingPeriodVisible?: boolean;\n\tformConfigClosingPeriodKey?: number;\n\tidSubspecialitySelected?: number;\n\tcodeSubspeciality?: string;\n\tnameSubspecialitySelected?: string;\n\tforceReloadTimestamp?: number;\n\thighlightfilter?: string;\n    countData?: number;\n\tpage?: number;\n    limit?: number;\n\tremoveSubspecialityKey?: number;\n\tremoveSubspecialityVisible?: boolean;\n\tspecialities?: SpecialityDetails[];\n\tidSpecialitySelected?: number;\n\tidSpecialitySelectedSet?: number;\n\tnameSpecialitySelected?: string;\n}\n\nclass SubspecialityListContainer extends React.Component<WithTranslation, IState> {\n    public state: IState = {};\n\n    public componentDidMount() {\n\t\tthis.loadData();\n\t}\n\n    public render() {\n        return (\n            <>\n                <View\n\t\t\t\t\t{...this.state}\n\t\t\t\t\tlimit = {this.state.limit ? this.state.limit : 1}\n\t\t\t\t\tcountData={this.state.countData ? this.state.countData : 0}\n\t\t\t\t\tpage={this.state.page ? this.state.page : 1}\n\t\t\t\t\tloadSubspecialityData={this.loadData}\n\t\t\t\t\tonClickEditSubspecialityForm={this.onClickEditSubspecialityForm}\n\t\t\t\t\tonClickRemoveSubspeciality= {this.onClickRemoveSubspeciality}\n\t\t\t\t\tfilterOptions={this.onfilterOptions}\n\t\t\t\t\tonChangeSearch={this.onChangeSubspeciality}\n\n\t\t\t\t/>\n\t\t\t\t<SubspecialityFormContainer\n\t\t\t\t\t{...this.state}\n\t\t\t\t\tkey={this.state.subspecialityFormKey}\n\t\t\t\t\tonClose={this.onCloseEditSubspecialityForm}\n\t\t\t\t\tfilterOptions={this.onfilterOptions}\n\t\t\t\t\tonChangeSearch={this.onChangeSubspeciality}\n\t\t\t\t/>\n\n\t\t\t\t<SubspecialityRemoveConfirmation\n\t\t\t\t\tkey={this.state.removeSubspecialityKey}\n\t\t\t\t\tnameSubspeciality={this.state.nameSubspecialitySelected}\n\t\t\t\t\tvisible={this.state.removeSubspecialityVisible}\n\t\t\t\t\tonClose={this.onCloseRemoveSubspeciality}\n\t\t\t\t\tremoveSubspeciality={this.removeSubspeciality}\n\t\t\t\t/>\n\n            </>\n        )\n    };\n\n    private loadData = (offset?: number, nameSubspeciality?: string, idSpeciality?: number) => {\n\t\tif (offset) this.setState({page: offset});\n\t\tlet limit = UTILS.calculatePageSizeForMainTableOther().limit;\n\t\tRest<{ type: string, offset?:number, limit: number, filter?:string, idSpeciality?: number },\n         {limit:number, offset:string, dataCount:string, data: SubspecialityDetails[]}>()\n\t\t\t.operation({\n\t\t\t\ttype: \"SelectSubespecialidades\",\n\t\t\t\tlimit: limit,\n\t\t\t\toffset: offset ? (offset - 1) * limit : 0,\n\t\t\t\tfilter: nameSubspeciality,\n\t\t\t\tidSpeciality: idSpeciality\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.setState({ subspecialities: response.data, countData: Number(response.dataCount), limit: response.limit});\n\t\t\t});\n\t};\n\n\tprivate removeSubspeciality = () => {\n\t\tRest<{ type: string; idSubspeciality: number, idSpeciality: number }, any>()\n\t\t\t.operation({\n\t\t\t\ttype: \"DeleteSubespecialidad\",\n\t\t\t\tidSubspeciality: this.state.idSubspecialitySelected!,\n\t\t\t\tidSpeciality: this.state.idSpecialitySelected!\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.onCloseRemoveSubspeciality(true);\n\t\t\t});\n\t};\n\n\tprivate onClickRemoveSubspeciality = (idSubspeciality: number, nameSubspeciality: string, idSpecialitySelected?: number ) => {\n\t\tthis.setState({\n\t\t\tidSubspecialitySelected: idSubspeciality,\n\t\t\tnameSubspecialitySelected: nameSubspeciality,\n\t\t\tremoveSubspecialityVisible: true,\n\t\t\tremoveSubspecialityKey: new Date().getTime(),\n\t\t\tidSpecialitySelected: idSpecialitySelected\n\t\t});\n\t};\n\n\tprivate onCloseRemoveSubspeciality = (save: boolean) => {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tidSubspecialitySelected: undefined,\n\t\t\t\tnameSubspecialitySelected: undefined,\n\t\t\t\tremoveSubspecialityVisible: false,\n\t\t\t\tidSpecialitySelected: undefined\n\t\t\t},\n\t\t\t() => save && this.loadData(this.state.page)\n\t\t);\n\t};\n\n    private onClickEditSubspecialityForm = (idSubspecialitySelected?: number,  codeSubspecialitySelected?: string, nameSubspecialitySelected?: string, idSpecialitySelected?: number, nameSpecialitySelected?: string) => {\n\t\tthis.onfilterOptions(nameSpecialitySelected);\n\t\tthis.setState({\n\t\t\tsubspecialityFormVisible: true,\n\t\t\tsubspecialityFormKey: new Date().getTime(),\n\t\t\tidSubspecialitySelected: idSubspecialitySelected,\n\t\t\tcodeSubspeciality: codeSubspecialitySelected,\n\t\t\tnameSubspecialitySelected: nameSubspecialitySelected,\n\t\t\tidSpecialitySelected: idSpecialitySelected,\n\t\t\tnameSpecialitySelected: nameSpecialitySelected\n\t\t});\n\t};\n\n    private onCloseEditSubspecialityForm = (save: boolean) => {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tsubspecialityFormVisible: false,\n\t\t\t\tidSubspecialitySelected: undefined,\n\t\t\t\tcodeSubspeciality: undefined,\n\t\t\t\tnameSubspecialitySelected: undefined,\n\t\t\t\tidSpecialitySelected: undefined,\n\t\t\t\tnameSpecialitySelected: undefined,\n\t\t\t\tidSpecialitySelectedSet: undefined\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif (save) {\n\t\t\t\t\tnotification[\"success\"]({\n\t\t\t\t\t\tmessage: this.props.t(\"titles:actionPerformed\"),\n\t\t\t\t\t});\n\t\t\t\t\tthis.loadData(this.state.page);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n    private onfilterOptions = (inputValue?:string) => {\n\t\tRest<{ type: string; filter?: string }, any>()\n\t\t\t.operation({\n\t\t\t\ttype: \"GetEspecialidades\",\n                filter: inputValue\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tspecialities: response,\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\tprivate onChangeSubspeciality = (idSpecialitySelected?: number) => {\n        this.setState({\n            idSpecialitySelectedSet: idSpecialitySelected\n        })\n    };\n\n}\n\nexport default withTranslation(\"subspecialityList\")(SubspecialityListContainer);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}