{"ast":null,"code":"import{notification}from\"antd\";import React from\"react\";import{withTranslation}from\"react-i18next\";import{Rest}from\"utils/utils\";import View from\"./ClosingPeriodForm\";import NewClosingPeriodModalContainer from\"./NewClosingPeriodModalContainer\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";class ClosingPeriodFormContainer extends React.Component{constructor(){super(...arguments);this.state={showPastPeriod:false};this.loadData=()=>{Rest().operation({type:\"GetClosingPeriodsData\",idLocation:this.props.idLocation,date:new Date(),showPastPeriod:this.state.showPastPeriod}).then(response=>{this.setState({holidays:response,loaded:true});});};this.onChangePublicHoliday=(idZoneHoliday,checked)=>{Rest().operation({type:\"ManagePublicholidays\",idZoneHoliday,idLocation:this.props.idLocation,active:checked});};this.onClickNewHolidayForm=()=>{this.setState({newHolidayFormVisible:true,newHolidayFormKey:new Date().getTime()});};this.onCloseNewHolidayForm=saved=>{this.setState({newHolidayFormVisible:false},()=>{if(saved){this.loadData();}});};this.deleteHolidayPeriod=idPeriod=>{Rest().operation({type:\"DeleteLocationClosingPeriodById\",id:idPeriod}).then(()=>{notification[\"success\"]({message:this.props.t(\"titles:actionPerformed\")});this.loadData();});};this.onClickPastPeriod=()=>{this.setState({showPastPeriod:!this.state.showPastPeriod},()=>this.loadData());};}componentDidMount(){if(this.props.idLocation){this.loadData();}}render(){return this.state.loaded?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(View,{...this.state,visible:this.props.visible,nameLocation:this.props.nameLocation,onCancel:()=>this.props.onClose(false),onChangePublicHoliday:this.onChangePublicHoliday,onClickNewHolidayForm:this.onClickNewHolidayForm,onClickPastPeriod:this.onClickPastPeriod,deleteHolidayPeriod:this.deleteHolidayPeriod}),/*#__PURE__*/_jsx(NewClosingPeriodModalContainer,{idLocation:this.props.idLocation,visible:this.state.newHolidayFormVisible,onClose:this.onCloseNewHolidayForm},this.state.newHolidayFormKey)]}):/*#__PURE__*/_jsx(_Fragment,{});}}export default withTranslation(\"holidaysAndClosingForm\")(ClosingPeriodFormContainer);","map":{"version":3,"names":["notification","React","withTranslation","Rest","View","NewClosingPeriodModalContainer","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ClosingPeriodFormContainer","Component","constructor","arguments","state","showPastPeriod","loadData","operation","type","idLocation","props","date","Date","then","response","setState","holidays","loaded","onChangePublicHoliday","idZoneHoliday","checked","active","onClickNewHolidayForm","newHolidayFormVisible","newHolidayFormKey","getTime","onCloseNewHolidayForm","saved","deleteHolidayPeriod","idPeriod","id","message","t","onClickPastPeriod","componentDidMount","render","children","visible","nameLocation","onCancel","onClose"],"sources":["/home/gpt2008/Desktop/Clubs/club/club/club-ui/src/components/closingPeriods/ClosingPeriodFormContainer.tsx"],"sourcesContent":["import { notification } from \"antd\";\nimport React from \"react\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport HolidaysManagementData from \"types/entities/Holidays\";\nimport GetHolidaysManagementData from \"types/operations/Holidays\";\nimport { Rest } from \"utils/utils\";\nimport View from \"./ClosingPeriodForm\";\nimport NewClosingPeriodModalContainer from \"./NewClosingPeriodModalContainer\";\n\ninterface IProps {\n\tidLocation?: number;\n\tnameLocation?: string;\n\tvisible?: boolean;\n\tonClose: (saved: boolean) => void;\n}\n\nexport interface IState {\n\tholidays?: HolidaysManagementData;\n\tnewHolidayFormVisible?: boolean;\n\tnewHolidayFormKey?: number;\n\tshowPastPeriod: boolean;\n\tloaded?: boolean;\n}\n\nclass ClosingPeriodFormContainer extends React.Component<WithTranslation & IProps, IState> {\n\tpublic state: IState = {\n\t\tshowPastPeriod: false,\n\t};\n\n\tpublic componentDidMount() {\n\t\tif (this.props.idLocation) {\n\t\t\tthis.loadData();\n\t\t}\n\t}\n\n\tpublic render() {\n\t\treturn this.state.loaded ? (\n\t\t\t<>\n\t\t\t\t<View\n\t\t\t\t\t{...this.state}\n\t\t\t\t\tvisible={this.props.visible}\n\t\t\t\t\tnameLocation={this.props.nameLocation}\n\t\t\t\t\tonCancel={() => this.props.onClose(false)}\n\t\t\t\t\tonChangePublicHoliday={this.onChangePublicHoliday}\n\t\t\t\t\tonClickNewHolidayForm={this.onClickNewHolidayForm}\n\t\t\t\t\tonClickPastPeriod={this.onClickPastPeriod}\n\t\t\t\t\tdeleteHolidayPeriod={this.deleteHolidayPeriod}\n\t\t\t\t/>\n\n\t\t\t\t<NewClosingPeriodModalContainer\n\t\t\t\t\tidLocation={this.props.idLocation!}\n\t\t\t\t\tkey={this.state.newHolidayFormKey}\n\t\t\t\t\tvisible={this.state.newHolidayFormVisible}\n\t\t\t\t\tonClose={this.onCloseNewHolidayForm}\n\t\t\t\t/>\n\t\t\t</>\n\t\t) : (\n\t\t\t<></>\n\t\t);\n\t}\n\n\tprivate loadData = () => {\n\t\tRest<GetHolidaysManagementData, HolidaysManagementData>()\n\t\t\t.operation({\n\t\t\t\ttype: \"GetClosingPeriodsData\",\n\t\t\t\tidLocation: this.props.idLocation!,\n\t\t\t\tdate: new Date(),\n\t\t\t\tshowPastPeriod: this.state.showPastPeriod,\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.setState({ holidays: response, loaded: true });\n\t\t\t});\n\t};\n\n\tpublic onChangePublicHoliday = (idZoneHoliday: number, checked: boolean) => {\n\t\tRest<\n\t\t\t{\n\t\t\t\ttype: string;\n\t\t\t\tidZoneHoliday: number;\n\t\t\t\tidLocation: number;\n\t\t\t\tactive: boolean;\n\t\t\t},\n\t\t\tany\n\t\t>().operation({\n\t\t\ttype: \"ManagePublicholidays\",\n\t\t\tidZoneHoliday,\n\t\t\tidLocation: this.props.idLocation!,\n\t\t\tactive: checked,\n\t\t});\n\t};\n\n\tprivate onClickNewHolidayForm = () => {\n\t\tthis.setState({\n\t\t\tnewHolidayFormVisible: true,\n\t\t\tnewHolidayFormKey: new Date().getTime(),\n\t\t});\n\t};\n\n\tprivate onCloseNewHolidayForm = (saved: boolean) => {\n\t\tthis.setState({ newHolidayFormVisible: false }, () => {\n\t\t\tif (saved) {\n\t\t\t\tthis.loadData();\n\t\t\t}\n\t\t});\n\t};\n\n\tprivate deleteHolidayPeriod = (idPeriod: number) => {\n\t\tRest<{ type: string; id: number }, any>()\n\t\t\t.operation({\n\t\t\t\ttype: \"DeleteLocationClosingPeriodById\",\n\t\t\t\tid: idPeriod,\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tnotification[\"success\"]({\n\t\t\t\t\tmessage: this.props.t(\"titles:actionPerformed\"),\n\t\t\t\t});\n\n\t\t\t\tthis.loadData();\n\t\t\t});\n\t};\n\n\tprivate onClickPastPeriod = () => {\n\t\tthis.setState({ showPastPeriod: !this.state.showPastPeriod }, () => this.loadData());\n\t};\n}\n\nexport default withTranslation(\"holidaysAndClosingForm\")(ClosingPeriodFormContainer);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}