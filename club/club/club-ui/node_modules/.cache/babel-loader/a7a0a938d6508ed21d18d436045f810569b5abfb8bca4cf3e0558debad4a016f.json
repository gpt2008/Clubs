{"ast":null,"code":"import{notification}from\"antd\";import React from\"react\";import{withTranslation}from\"react-i18next\";import enumClosingPeriodDateType from\"types/enums/EnumClosingPeriodDateType\";import{Rest}from\"utils/utils\";import View from\"./NewClosingPeriodModal\";import{jsx as _jsx}from\"react/jsx-runtime\";class NewClosingPeriodModalContainer extends React.Component{constructor(){super(...arguments);this.state={errorFields:[]};this.validateAndSave=form=>{form.validateFields().then(values=>this.saveNewHolidayPeriod(values));};this.saveNewHolidayPeriod=values=>{const dateFrom=values.dateFrom;const dateTo=values.periodType===enumClosingPeriodDateType.ONE_DAY?values.dateFrom:values.dateTo;if(dateFrom.isAfter(dateTo)){const dateError={fieldName:\"dateFrom\"};this.setState({errorFields:[dateError]});return;}Rest().operation({type:\"SaveHolidayPeriod\",idLocation:this.props.idLocation,namePeriod:values.namePeriod,dateFrom,dateTo}).then(()=>{notification[\"success\"]({message:this.props.t(\"titles:actionPerformed\")});this.props.onClose(true);});};}render(){return/*#__PURE__*/_jsx(View,{...this.state,visible:this.props.visible,onClose:this.props.onClose,onSubmit:this.validateAndSave});}}export default withTranslation(\"holidaysAndClosingForm\")(NewClosingPeriodModalContainer);","map":{"version":3,"names":["notification","React","withTranslation","enumClosingPeriodDateType","Rest","View","jsx","_jsx","NewClosingPeriodModalContainer","Component","constructor","arguments","state","errorFields","validateAndSave","form","validateFields","then","values","saveNewHolidayPeriod","dateFrom","dateTo","periodType","ONE_DAY","isAfter","dateError","fieldName","setState","operation","type","idLocation","props","namePeriod","message","t","onClose","render","visible","onSubmit"],"sources":["/home/gpt2008/Desktop/Clubs/club/club/club-ui/src/components/closingPeriods/NewClosingPeriodModalContainer.tsx"],"sourcesContent":["import { FormInstance, notification } from \"antd\";\nimport { Store } from \"antd/lib/form/interface\";\nimport React from \"react\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport enumClosingPeriodDateType from \"types/enums/EnumClosingPeriodDateType\";\nimport FormErrorField from \"utils/form/formErrorField\";\nimport { Rest } from \"utils/utils\";\nimport View from \"./NewClosingPeriodModal\";\n\ninterface IProps {\n\tidLocation: number;\n\tvisible?: boolean;\n\tonClose: (saved: boolean) => void;\n}\n\nexport interface IState {\n\terrorFields: FormErrorField[];\n}\n\nclass NewClosingPeriodModalContainer extends React.Component<WithTranslation & IProps, IState> {\n\tpublic state: IState = {\n\t\terrorFields: [],\n\t};\n\n\tpublic render() {\n\t\treturn (\n\t\t\t<View\n\t\t\t\t{...this.state}\n\t\t\t\tvisible={this.props.visible}\n\t\t\t\tonClose={this.props.onClose}\n\t\t\t\tonSubmit={this.validateAndSave}\n\t\t\t/>\n\t\t);\n\t}\n\n\tprivate validateAndSave = (form: FormInstance) => {\n\t\tform.validateFields().then((values) => this.saveNewHolidayPeriod(values));\n\t};\n\n\tprivate saveNewHolidayPeriod = (values: Store) => {\n\t\tconst dateFrom = values.dateFrom;\n\t\tconst dateTo =\n\t\t\tvalues.periodType === enumClosingPeriodDateType.ONE_DAY ? values.dateFrom : values.dateTo;\n\n\t\tif (dateFrom.isAfter(dateTo)) {\n\t\t\tconst dateError = { fieldName: \"dateFrom\" };\n\n\t\t\tthis.setState({ errorFields: [dateError] });\n\t\t\treturn;\n\t\t}\n\n\t\tRest<\n\t\t\t{\n\t\t\t\ttype: string;\n\t\t\t\tidLocation: number;\n\t\t\t\tnamePeriod: string;\n\t\t\t\tdateFrom: Date;\n\t\t\t\tdateTo: Date;\n\t\t\t},\n\t\t\tany\n\t\t>()\n\t\t\t.operation({\n\t\t\t\ttype: \"SaveHolidayPeriod\",\n\t\t\t\tidLocation: this.props.idLocation,\n\t\t\t\tnamePeriod: values.namePeriod,\n\t\t\t\tdateFrom,\n\t\t\t\tdateTo,\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tnotification[\"success\"]({\n\t\t\t\t\tmessage: this.props.t(\"titles:actionPerformed\"),\n\t\t\t\t});\n\n\t\t\t\tthis.props.onClose(true);\n\t\t\t});\n\t};\n}\n\nexport default withTranslation(\"holidaysAndClosingForm\")(NewClosingPeriodModalContainer);\n"],"mappings":"AAAA,OAAuBA,YAAY,KAAQ,MAAM,CAEjD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAA0BC,eAAe,KAAQ,eAAe,CAChE,MAAO,CAAAC,yBAAyB,KAAM,uCAAuC,CAE7E,OAASC,IAAI,KAAQ,aAAa,CAClC,MAAO,CAAAC,IAAI,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAY3C,KAAM,CAAAC,8BAA8B,QAAS,CAAAP,KAAK,CAACQ,SAA4C,CAAAC,YAAA,WAAAC,SAAA,OACvFC,KAAK,CAAW,CACtBC,WAAW,CAAE,EACd,CAAC,MAaOC,eAAe,CAAIC,IAAkB,EAAK,CACjDA,IAAI,CAACC,cAAc,CAAC,CAAC,CAACC,IAAI,CAAEC,MAAM,EAAK,IAAI,CAACC,oBAAoB,CAACD,MAAM,CAAC,CAAC,CAC1E,CAAC,MAEOC,oBAAoB,CAAID,MAAa,EAAK,CACjD,KAAM,CAAAE,QAAQ,CAAGF,MAAM,CAACE,QAAQ,CAChC,KAAM,CAAAC,MAAM,CACXH,MAAM,CAACI,UAAU,GAAKnB,yBAAyB,CAACoB,OAAO,CAAGL,MAAM,CAACE,QAAQ,CAAGF,MAAM,CAACG,MAAM,CAE1F,GAAID,QAAQ,CAACI,OAAO,CAACH,MAAM,CAAC,CAAE,CAC7B,KAAM,CAAAI,SAAS,CAAG,CAAEC,SAAS,CAAE,UAAW,CAAC,CAE3C,IAAI,CAACC,QAAQ,CAAC,CAAEd,WAAW,CAAE,CAACY,SAAS,CAAE,CAAC,CAAC,CAC3C,OACD,CAEArB,IAAI,CASF,CAAC,CACDwB,SAAS,CAAC,CACVC,IAAI,CAAE,mBAAmB,CACzBC,UAAU,CAAE,IAAI,CAACC,KAAK,CAACD,UAAU,CACjCE,UAAU,CAAEd,MAAM,CAACc,UAAU,CAC7BZ,QAAQ,CACRC,MACD,CAAC,CAAC,CACDJ,IAAI,CAAC,IAAM,CACXjB,YAAY,CAAC,SAAS,CAAC,CAAC,CACvBiC,OAAO,CAAE,IAAI,CAACF,KAAK,CAACG,CAAC,CAAC,wBAAwB,CAC/C,CAAC,CAAC,CAEF,IAAI,CAACH,KAAK,CAACI,OAAO,CAAC,IAAI,CAAC,CACzB,CAAC,CAAC,CACJ,CAAC,EAnDMC,MAAMA,CAAA,CAAG,CACf,mBACC7B,IAAA,CAACF,IAAI,KACA,IAAI,CAACO,KAAK,CACdyB,OAAO,CAAE,IAAI,CAACN,KAAK,CAACM,OAAQ,CAC5BF,OAAO,CAAE,IAAI,CAACJ,KAAK,CAACI,OAAQ,CAC5BG,QAAQ,CAAE,IAAI,CAACxB,eAAgB,CAC/B,CAAC,CAEJ,CA2CD,CAEA,cAAe,CAAAZ,eAAe,CAAC,wBAAwB,CAAC,CAACM,8BAA8B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}