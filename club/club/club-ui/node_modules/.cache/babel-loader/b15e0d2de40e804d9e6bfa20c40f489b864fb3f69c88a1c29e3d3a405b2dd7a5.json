{"ast":null,"code":"import React from\"react\";import{withTranslation}from\"react-i18next\";import enumClosingPeriodDateType from\"types/enums/EnumClosingPeriodDateType\";import{Rest}from\"utils/utils\";import View from\"./NewProviderHolidaysModal\";import{jsx as _jsx}from\"react/jsx-runtime\";class NewProviderHolidaysModalContainer extends React.Component{constructor(){super(...arguments);this.state={errorFields:[]};this.validateAndSave=form=>{form.validateFields().then(values=>this.saveNewHolidayPeriod(values));};this.saveNewHolidayPeriod=values=>{const dateFrom=values.dateFrom;const dateTo=values.periodType===enumClosingPeriodDateType.ONE_DAY?values.dateFrom:values.dateTo;if(dateFrom.isAfter(dateTo)){const dateError={fieldName:\"dateFrom\"};this.setState({errorFields:[dateError]});return;}Rest().operation({type:\"SaveProviderHolidayPeriod\",idProvider:this.props.idProvider,nameHoliday:values.nameHoliday,dateFrom,dateTo}).then(()=>this.props.onClose(true));};}render(){return/*#__PURE__*/_jsx(View,{...this.state,visible:this.props.visible,onClose:this.props.onClose,onSubmit:this.validateAndSave});}}export default withTranslation(\"providerHolidayForm\")(NewProviderHolidaysModalContainer);","map":{"version":3,"names":["React","withTranslation","enumClosingPeriodDateType","Rest","View","jsx","_jsx","NewProviderHolidaysModalContainer","Component","constructor","arguments","state","errorFields","validateAndSave","form","validateFields","then","values","saveNewHolidayPeriod","dateFrom","dateTo","periodType","ONE_DAY","isAfter","dateError","fieldName","setState","operation","type","idProvider","props","nameHoliday","onClose","render","visible","onSubmit"],"sources":["/home/gpt2008/Desktop/Clubs/club/club/club-ui/src/components/providerHolidays/NewProviderHolidaysModalContainer.tsx"],"sourcesContent":["import React from \"react\";\n\nimport { FormInstance } from \"antd\";\nimport { Store } from \"antd/lib/form/interface\";\nimport { WithTranslation, withTranslation } from \"react-i18next\";\nimport enumClosingPeriodDateType from \"types/enums/EnumClosingPeriodDateType\";\nimport FormErrorField from \"utils/form/formErrorField\";\nimport { Rest } from \"utils/utils\";\nimport View from \"./NewProviderHolidaysModal\";\n\ninterface IProps {\n\tidProvider: number;\n\tvisible?: boolean;\n\tonClose: (saved: boolean) => void;\n}\n\nexport interface IState {\n\terrorFields: FormErrorField[];\n}\n\nclass NewProviderHolidaysModalContainer extends React.Component<WithTranslation & IProps, IState> {\n\tpublic state: IState = {\n\t\terrorFields: [],\n\t};\n\n\tpublic render() {\n\t\treturn (\n\t\t\t<View\n\t\t\t\t{...this.state}\n\t\t\t\tvisible={this.props.visible}\n\t\t\t\tonClose={this.props.onClose}\n\t\t\t\tonSubmit={this.validateAndSave}\n\t\t\t/>\n\t\t);\n\t}\n\n\tprivate validateAndSave = (form: FormInstance) => {\n\t\tform.validateFields().then((values) => this.saveNewHolidayPeriod(values));\n\t};\n\n\tprivate saveNewHolidayPeriod = (values: Store) => {\n\t\tconst dateFrom = values.dateFrom;\n\t\tconst dateTo =\n\t\t\tvalues.periodType === enumClosingPeriodDateType.ONE_DAY ? values.dateFrom : values.dateTo;\n\n\t\tif (dateFrom.isAfter(dateTo)) {\n\t\t\tconst dateError = { fieldName: \"dateFrom\" };\n\n\t\t\tthis.setState({ errorFields: [dateError] });\n\t\t\treturn;\n\t\t}\n\n\t\tRest<\n\t\t\t{\n\t\t\t\ttype: string;\n\t\t\t\tidProvider: number;\n\t\t\t\tnameHoliday: string;\n\t\t\t\tdateFrom: Date;\n\t\t\t\tdateTo: Date;\n\t\t\t},\n\t\t\tany\n\t\t>()\n\t\t\t.operation({\n\t\t\t\ttype: \"SaveProviderHolidayPeriod\",\n\t\t\t\tidProvider: this.props.idProvider,\n\t\t\t\tnameHoliday: values.nameHoliday,\n\t\t\t\tdateFrom,\n\t\t\t\tdateTo,\n\t\t\t})\n\t\t\t.then(() => this.props.onClose(true));\n\t};\n}\n\nexport default withTranslation(\"providerHolidayForm\")(NewProviderHolidaysModalContainer);\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAIzB,OAA0BC,eAAe,KAAQ,eAAe,CAChE,MAAO,CAAAC,yBAAyB,KAAM,uCAAuC,CAE7E,OAASC,IAAI,KAAQ,aAAa,CAClC,MAAO,CAAAC,IAAI,KAAM,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAY9C,KAAM,CAAAC,iCAAiC,QAAS,CAAAP,KAAK,CAACQ,SAA4C,CAAAC,YAAA,WAAAC,SAAA,OAC1FC,KAAK,CAAW,CACtBC,WAAW,CAAE,EACd,CAAC,MAaOC,eAAe,CAAIC,IAAkB,EAAK,CACjDA,IAAI,CAACC,cAAc,CAAC,CAAC,CAACC,IAAI,CAAEC,MAAM,EAAK,IAAI,CAACC,oBAAoB,CAACD,MAAM,CAAC,CAAC,CAC1E,CAAC,MAEOC,oBAAoB,CAAID,MAAa,EAAK,CACjD,KAAM,CAAAE,QAAQ,CAAGF,MAAM,CAACE,QAAQ,CAChC,KAAM,CAAAC,MAAM,CACXH,MAAM,CAACI,UAAU,GAAKnB,yBAAyB,CAACoB,OAAO,CAAGL,MAAM,CAACE,QAAQ,CAAGF,MAAM,CAACG,MAAM,CAE1F,GAAID,QAAQ,CAACI,OAAO,CAACH,MAAM,CAAC,CAAE,CAC7B,KAAM,CAAAI,SAAS,CAAG,CAAEC,SAAS,CAAE,UAAW,CAAC,CAE3C,IAAI,CAACC,QAAQ,CAAC,CAAEd,WAAW,CAAE,CAACY,SAAS,CAAE,CAAC,CAAC,CAC3C,OACD,CAEArB,IAAI,CASF,CAAC,CACDwB,SAAS,CAAC,CACVC,IAAI,CAAE,2BAA2B,CACjCC,UAAU,CAAE,IAAI,CAACC,KAAK,CAACD,UAAU,CACjCE,WAAW,CAAEd,MAAM,CAACc,WAAW,CAC/BZ,QAAQ,CACRC,MACD,CAAC,CAAC,CACDJ,IAAI,CAAC,IAAM,IAAI,CAACc,KAAK,CAACE,OAAO,CAAC,IAAI,CAAC,CAAC,CACvC,CAAC,EA7CMC,MAAMA,CAAA,CAAG,CACf,mBACC3B,IAAA,CAACF,IAAI,KACA,IAAI,CAACO,KAAK,CACduB,OAAO,CAAE,IAAI,CAACJ,KAAK,CAACI,OAAQ,CAC5BF,OAAO,CAAE,IAAI,CAACF,KAAK,CAACE,OAAQ,CAC5BG,QAAQ,CAAE,IAAI,CAACtB,eAAgB,CAC/B,CAAC,CAEJ,CAqCD,CAEA,cAAe,CAAAZ,eAAe,CAAC,qBAAqB,CAAC,CAACM,iCAAiC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}